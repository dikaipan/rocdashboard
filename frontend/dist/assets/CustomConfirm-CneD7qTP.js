import{r as m,aa as j,av as B,j as n,X as v,aw as T}from"./vendor-react-C0jbZujj.js";import{u as E}from"./index-BT-vs0to.js";let C=[],w=null;const N=50;function y(d,r=null){C.push({eventName:d,eventData:r,timestamp:Date.now()}),w&&clearTimeout(w),w=setTimeout(()=>{const i={};C.forEach(e=>{i[e.eventName]||(i[e.eventName]=[]),i[e.eventName].push(e)}),Object.keys(i).forEach(e=>{i[e];const b=()=>{window.dispatchEvent(new Event(e))};window.requestIdleCallback?window.requestIdleCallback(b,{timeout:100}):requestAnimationFrame(b)}),C=[],w=null},N)}function I(d){const{endpoint:r,primaryKey:i="id",eventName:e=null}=d,[b,a]=m.useState(!1),[g,o]=m.useState(null),p=m.useCallback(async u=>{try{a(!0),o(null);const t=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!t.ok){const c=await t.json();throw new Error(c.error||"Failed to create item")}const s=await t.json();return e&&y(e),s}catch(t){throw o(t.message),t}finally{a(!1)}},[r,e]),l=m.useCallback(async(u,t)=>{try{a(!0),o(null);const s=encodeURIComponent(u),c=await fetch(`${r}/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!c.ok){const k=await c.json();throw new Error(k.error||"Failed to update item")}const f=await c.json();return e&&!f.no_changes&&y(e),f}catch(s){throw o(s.message),s}finally{a(!1)}},[r,e]),x=m.useCallback(async u=>{try{a(!0),o(null);const t=encodeURIComponent(u),s=await fetch(`${r}/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok){const f=await s.json();throw new Error(f.error||"Failed to delete item")}const c=await s.json();return e&&y(e),c}catch(t){throw o(t.message),t}finally{a(!1)}},[r,e]),h=m.useCallback(async u=>{try{a(!0),o(null);const t=await Promise.all(u.map(s=>{const c=encodeURIComponent(s);return fetch(`${r}/${c}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(f=>{if(!f.ok)throw new Error(`Failed to delete item ${s}`);return f.json()})}));return e&&y(e),t}catch(t){throw o(t.message),t}finally{a(!1)}},[r,e]);return{create:p,update:l,remove:x,bulkDelete:h,loading:b,error:g}}const S=()=>{const[d,r]=m.useState({isOpen:!1,title:"Konfirmasi",message:"",onConfirm:null,confirmText:"Ya",cancelText:"Batal",type:"warning",confirmButtonColor:"bg-blue-600 hover:bg-blue-700"}),i=m.useCallback((a,g,o={})=>{r({isOpen:!0,title:o.title||"Konfirmasi",message:a,onConfirm:g,confirmText:o.confirmText||"Ya",cancelText:o.cancelText||"Batal",type:o.type||"warning",confirmButtonColor:o.confirmButtonColor||"bg-blue-600 hover:bg-blue-700"})},[]),e=m.useCallback(()=>{r(a=>({...a,isOpen:!1,onConfirm:null}))},[]),b=m.useCallback(async()=>{if(d.onConfirm){e();try{await d.onConfirm()}catch{}}else e()},[d,e]);return{confirmState:d,showConfirm:i,closeConfirm:e,handleConfirm:b}},O=({isOpen:d,onClose:r,onConfirm:i,title:e="Konfirmasi",message:b,confirmText:a="Ya",cancelText:g="Batal",type:o="warning",confirmButtonColor:p="bg-blue-600 hover:bg-blue-700"})=>{const{isDark:l}=E();if(!d)return null;const x={dark:{overlay:"bg-black/70",cardBg:"bg-slate-800",text:"text-slate-100",textMuted:"text-slate-200",closeButton:"text-slate-300 hover:text-slate-100 hover:bg-slate-700/70",cancelButton:"bg-slate-700 hover:bg-slate-600 text-slate-100"},light:{overlay:"bg-black/50",cardBg:"bg-white",text:"text-gray-900",textMuted:"text-gray-800",closeButton:"text-gray-500 hover:text-gray-800 hover:bg-gray-200",cancelButton:"bg-gray-200 hover:bg-gray-300 text-gray-900"}},h=l?x.dark:x.light,u={warning:{icon:j,iconColor:l?"text-yellow-400":"text-yellow-600",iconBg:l?"bg-yellow-500/20":"bg-yellow-100",borderColor:l?"border-yellow-500/50":"border-yellow-300",bgGradient:l?"from-yellow-500/10 to-amber-500/5":"from-yellow-50 to-amber-50",confirmButtonColor:"bg-yellow-600 hover:bg-yellow-700"},danger:{icon:B,iconColor:l?"text-red-400":"text-red-600",iconBg:l?"bg-red-500/20":"bg-red-100",borderColor:l?"border-red-500/50":"border-red-300",bgGradient:l?"from-red-500/10 to-rose-500/5":"from-red-50 to-rose-50",confirmButtonColor:"bg-red-600 hover:bg-red-700"},info:{icon:j,iconColor:l?"text-blue-400":"text-blue-600",iconBg:l?"bg-blue-500/20":"bg-blue-100",borderColor:l?"border-blue-500/50":"border-blue-300",bgGradient:l?"from-blue-500/10 to-cyan-500/5":"from-blue-50 to-cyan-50",confirmButtonColor:"bg-blue-600 hover:bg-blue-700"}},t=u[o]||u.warning,s=t.icon,c=o==="danger"||o==="warning"?t.confirmButtonColor:p,f=async()=>{i&&(r(),await i())};return n.jsx("div",{className:`fixed inset-0 ${h.overlay} backdrop-blur-sm flex items-center justify-center z-[9999] p-4`,children:n.jsxs("div",{className:`${h.cardBg} bg-gradient-to-br ${t.bgGradient} rounded-2xl border ${t.borderColor} shadow-2xl w-full max-w-md transform transition-all animate-in fade-in zoom-in duration-200`,children:[n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-xl ${t.iconBg} flex items-center justify-center flex-shrink-0`,children:n.jsx(s,{className:t.iconColor,size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:`text-lg font-bold ${h.text} mb-2`,children:e}),n.jsx("p",{className:`text-sm ${h.textMuted} whitespace-pre-line`,children:b})]}),n.jsx("button",{onClick:r,className:`${h.closeButton} p-1 rounded-lg transition-all flex-shrink-0`,children:n.jsx(v,{size:20})})]})}),n.jsxs("div",{className:"px-6 pb-6 flex gap-3",children:[n.jsxs("button",{onClick:r,className:`flex-1 px-4 py-2.5 rounded-xl font-medium ${h.cancelButton} transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2`,children:[n.jsx(v,{size:18}),g]}),n.jsxs("button",{onClick:f,className:`flex-1 px-4 py-2.5 rounded-xl font-medium text-white transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2 ${c}`,children:[n.jsx(T,{size:18}),a]})]})]})})};export{O as C,I as a,S as u};
