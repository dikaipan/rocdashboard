import{r,j as e,E as De,F as Fe,H as $e,c as ne,J as re,K as ze,O as ie,Q as oe,I as ce,V as de,W as Le,Z as Ve,$ as Ie,a0 as Re,R as Oe,a1 as Pe,a2 as Me,a3 as Ue}from"./vendor-react-DhTDDHjY.js";import{u as He}from"./useEngineerData-CH_O1yHW.js";import{u as Be,a as Ke,b as qe,C as We,c as Je,I as Ge}from"./InlineLoadingSpinner-BUvN4jYC.js";import{p as Q}from"./textUtils-DatDPYXU.js";import{S as Qe}from"./SkillProgress-CpQTq6g-.js";import{P as Xe}from"./PageLayout-I56-JVwe.js";import{L as Ye,g as G,T as D,c as Ze}from"./index-BTHVjZ86.js";import"./vendor-maps-C_U1R0uQ.js";function es(j,{searchTerm:i,sortBy:x,sortValue:y}){return r.useMemo(()=>{let g=j;if(y&&(x==="region"?g=g.filter(d=>d.region===y):x==="vendor"?g=g.filter(d=>d.vendor===y):x==="area_group"&&(g=g.filter(d=>d.area_group===y))),i){const d=i.toLowerCase();g=g.filter(f=>{var p,m,v,n,b;return((p=f.name)==null?void 0:p.toLowerCase().includes(d))||((m=f.area_group)==null?void 0:m.toLowerCase().includes(d))||((v=f.region)==null?void 0:v.toLowerCase().includes(d))||((n=f.vendor)==null?void 0:n.toLowerCase().includes(d))||((b=f.id)==null?void 0:b.toLowerCase().includes(d))})}return g=[...g].sort((d,f)=>{var p,m,v;if(x==="experience"){const n=Q(d.years_experience);return Q(f.years_experience)-n}else{if(x==="region")return((p=d.region)==null?void 0:p.localeCompare(f.region||""))||0;if(x==="vendor")return((m=d.vendor)==null?void 0:m.localeCompare(f.vendor||""))||0;if(x==="area_group")return((v=d.area_group)==null?void 0:v.localeCompare(f.area_group||""))||0}return 0}),g},[j,i,x,y])}function ss(j,i){return r.useMemo(()=>{const x=j.length,y=i.length,g=y>0?x/y*100:0,d=x>0?j.reduce((m,v)=>m+Q(v.years_experience),0)/x:0,f=j.filter(m=>m.technical_skills_training&&m.soft_skills_training).length,p=x>0?f/x*100:0;return{totalEngineers:x,totalAllEngineers:y,percentageOfTotal:g,avgExperience:d,completedTraining:f,trainingCompletionRate:p}},[j,i])}function ts({create:j,update:i,remove:x,bulkDelete:y,setModalMode:g,setSelectedEngineerForEdit:d,setFormData:f,setShowModal:p,setSelectedEngineers:m,resetForm:v}){const n=Be(),b=Ke(),O=r.useCallback(o=>{g("edit"),d(o);const N={};Object.keys(o).forEach(C=>{N[C]=o[C]||""}),f(N),p(!0)},[g,d,f,p]),L=r.useCallback(async o=>{b.showConfirm(`Are you sure you want to delete ${o.name}?`,async()=>{try{await x(o.id),n.success("Engineer deleted successfully!")}catch(N){console.error("Error deleting engineer:",N),n.error(`Failed to delete engineer: ${N.message}`)}},{title:"Delete Engineer?",type:"danger",confirmText:"Delete",cancelText:"Cancel"})},[x,n,b]),V=r.useCallback(async(o,N)=>{if(!o||Object.keys(o).length===0){n.warning("Form data is empty. Please fill in the required fields.");return}if(!o.name||o.name.trim()===""){n.warning("Name is required");return}if(!o.id||o.id.trim()===""){n.warning("ID is required");return}const C=N==="create"?"create":"update";b.showConfirm(`Are you sure you want to ${C} this engineer?

ID: ${o.id}
Name: ${o.name}

Data will be ${C==="create"?"added":"updated"} to the database.`,async()=>{try{N==="create"?(await j(o),n.success("Engineer created successfully!")):(await i(o.id,o),n.success("Engineer updated successfully!")),p(!1),v()}catch(K){console.error("Error saving engineer:",K),n.error(`Failed to ${C} engineer: ${K.message}`)}},{title:`Confirm ${C==="create"?"Create":"Update"} Engineer`,type:"info",confirmText:"Save",cancelText:"Cancel"})},[j,i,p,v,n,b]),J=r.useCallback((o,N)=>{o.target.checked?m(N.map(C=>C.id)):m([])},[m]),F=r.useCallback((o,N)=>{N.includes(o)?m(N.filter(C=>C!==o)):m([...N,o])},[m]),B=r.useCallback(async o=>{if(o.length===0){n.warning("Please select engineers to delete");return}b.showConfirm(`Are you sure you want to delete ${o.length} engineer(s)?

This action cannot be undone.`,async()=>{try{await y(o),n.success(`Successfully deleted ${o.length} engineer(s)!`),m([])}catch(N){console.error("Error deleting engineers:",N),n.error(`Failed to delete engineers: ${N.message}`)}},{title:"Delete Multiple Engineers?",type:"danger",confirmText:"Delete",cancelText:"Cancel"})},[y,m,n,b]);return{handleEdit:O,handleDelete:L,handleSave:V,handleSelectAll:J,handleSelectOne:F,handleBulkDelete:B,alert:n,confirm:b}}function as(j){if(!j||j.length===0){alert("No data to export");return}const i=new Set;j.forEach(v=>{Object.keys(v).forEach(n=>{i.add(n)})});const x=Array.from(i).sort(),y=j.map(v=>{const n={};return x.forEach(b=>{n[b]=v[b]!==void 0&&v[b]!==null?String(v[b]):""}),n}),g=x,d=[g.join(","),...y.map(v=>g.map(n=>{const b=v[n]||"";return`"${String(b).replace(/"/g,'""')}"`}).join(","))].join(`
`),f=new Blob([d],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),m=URL.createObjectURL(f);p.setAttribute("href",m),p.setAttribute("download",`engineers_${new Date().toISOString().split("T")[0]}.csv`),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)}function ls({value:j="",onChange:i,placeholder:x="Search...",debounceMs:y=300,className:g=""}){const[d,f]=r.useState(j);return r.useEffect(()=>{const p=setTimeout(()=>{i(d)},y);return()=>clearTimeout(p)},[d,y,i]),r.useEffect(()=>{f(j)},[j]),e.jsxs("div",{className:`relative ${g}`,children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(De,{className:"h-5 w-5 text-slate-400"})}),e.jsx("input",{type:"text",value:d,onChange:p=>f(p.target.value),placeholder:x,className:"w-full pl-10 pr-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:border-blue-500 transition-colors"})]})}function gs(){var le;(le=Fe().state)==null||le.selectedEngineer;const{rows:i,loading:x}=He(),{create:y,update:g,remove:d,bulkDelete:f,loading:p}=qe({endpoint:"/api/engineers",primaryKey:"id",eventName:"engineerDataChanged"}),[m,v]=r.useState(""),[n,b]=r.useState("experience"),[O,L]=r.useState(""),[V,J]=r.useState(!1),[F,B]=r.useState([]),[o,N]=r.useState(!1),[C,K]=r.useState(new Set),[ns,rs]=r.useState(new Set(["id","name","region","area_group","vendor","years_experience"])),$=r.useMemo(()=>{if(!i||i.length===0)return[];const s=new Set;return i.forEach(t=>{Object.keys(t).forEach(l=>{s.add(l)})}),Array.from(s).sort()},[i]),P=r.useCallback(()=>{const s={};return $.length>0?$.forEach(t=>{s[t]=""}):(s.id="",s.name="",s.region="",s.area_group="",s.vendor="",s.years_experience="",s.technical_skills_training="",s.soft_skills_training=""),s},[$]),[X,q]=r.useState(!1),[z,Y]=r.useState("create"),[is,Z]=r.useState(null),[u,w]=r.useState({});r.useEffect(()=>{$.length>0&&Object.keys(u).length===0&&w(P())},[$,P]);const ue=r.useCallback(()=>{w(P())},[P]),xe=r.useCallback(s=>{K(t=>{const l=new Set(t);return l.has(s)?l.delete(s):l.add(s),l})},[]),R=r.useCallback(s=>s.includes("id")?e.jsx($e,{size:16,className:"text-blue-400"}):s.includes("name")?e.jsx(ne,{size:16,className:"text-green-400"}):s.includes("region")||s.includes("area")||s.includes("city")||s.includes("latitude")||s.includes("longitude")?e.jsx(re,{size:16,className:"text-orange-400"}):s.includes("vendor")?e.jsx(ze,{size:16,className:"text-purple-400"}):s.includes("experience")||s.includes("year")?e.jsx(ie,{size:16,className:"text-cyan-400"}):s.includes("skill")||s.includes("training")?e.jsx(oe,{size:16,className:"text-yellow-400"}):e.jsx(ce,{size:16,className:"text-slate-400"}),[]),M=r.useCallback(s=>s==="id"?"ID Engineer (cth: ENG001)":s==="name"?"Nama lengkap engineer":s==="region"?"Region (Region 1/2/3)":s==="area_group"?"Area group (cth: JAKARTA 1)":s==="vendor"?"Nama vendor/perusahaan":s==="years_experience"?"Pengalaman (cth: 5 Tahun 3 Bulan atau 5)":s.includes("technical_skills")?"Keahlian teknis dipisahkan koma (cth: ATM Repair, CRM Maintenance)":s.includes("soft_skills")?"Soft skills dipisahkan koma (cth: Communication, Leadership)":s==="latitude"?"Koordinat latitude (cth: -6.2088)":s==="longitude"?"Koordinat longitude (cth: 106.8456)":`Masukkan ${s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ").toLowerCase()}`,[]),T=r.useMemo(()=>{const s={};return!i||i.length===0||["region","area_group","vendor"].forEach(l=>{const c=new Set;i.forEach(h=>{const a=h[l];a!=null&&a!==""&&c.add(String(a).trim())}),s[l]=Array.from(c).sort()}),s},[i]),U=r.useMemo(()=>{const s={};return!i||i.length===0||i.forEach(t=>{const l=t.area_group;l&&t.latitude&&t.longitude&&(s[l]||(s[l]={latitude:t.latitude,longitude:t.longitude}))}),s},[i]),pe=r.useCallback(s=>{const t={...u,area_group:s};s&&U[s]&&(t.latitude=U[s].latitude,t.longitude=U[s].longitude),w(t)},[u,U]),me=r.useCallback(s=>{let t=s.replace(/^IDH/i,"").replace(/\D/g,"");t.length>5&&(t=t.substring(0,5));const l=t?`IDH${t}`:"";w({...u,id:l})},[u]),ee=r.useMemo(()=>{if(!u)return!1;const s=u.id||"",t=u.name&&u.name.trim().length>0;let l=!1;return z==="create"?l=s.replace(/^IDH/i,"").length===5:l=s.trim().length>0,l&&t},[u,z]),he=r.useCallback(s=>s.includes("date"),[]),ge=r.useCallback(s=>{if(!s)return"";if(s.includes("-")){const t=s.split("-");if(t.length===3){const l=t[0].padStart(2,"0"),c=t[1].padStart(2,"0");let h=t[2];return h.length===2&&(h="20"+h),`${h}-${c}-${l}`}}return""},[]),fe=r.useCallback(s=>{if(!s)return"";if(s.includes("-")&&s.length===10){const t=s.split("-");return`${t[2]}-${t[1]}-${t[0]}`}return s},[]),E=r.useMemo(()=>{const s={basic:["id","name","vendor"],location:["region","area_group","latitude","longitude"],experience:["years_experience"],skills:["technical_skills_training","soft_skills_training"],other:[]};return $.forEach(t=>{let l=!1;for(const[c,h]of Object.entries(s))if(h.some(a=>t.includes(a)||a.includes(t))){s[c].includes(t)||s[c].push(t),l=!0;break}l||s.other.push(t)}),s},[$]),k=es(i,{searchTerm:m,sortBy:n,sortValue:O}),be=ss(k,i),I=ts({create:y,update:g,remove:d,bulkDelete:f,setModalMode:Y,setSelectedEngineerForEdit:Z,setFormData:w,setShowModal:q,setSelectedEngineers:B,resetForm:ue}),{alert:A,confirm:_}=I,je=()=>{as(k)},ve=s=>{I.handleEdit(s)},Ne=s=>{I.handleDelete(s)},ye=async()=>{await I.handleSave(u,z)},we=s=>{I.handleSelectAll(s,k)},Ce=s=>{I.handleSelectOne(s,F)},ke=async()=>{await I.handleBulkDelete(F)},Se=async s=>{const t=s.target.files[0];if(t){if(!t.name.endsWith(".csv")){A.warning("Please upload a CSV file");return}N(!0);try{const l=new FormData;l.append("file",t),l.append("target","engineers");const c=await fetch("/api/upload",{method:"POST",body:l});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to upload CSV")}A.success("CSV uploaded successfully!","Upload Berhasil"),window.dispatchEvent(new Event("engineerDataChanged")),s.target.value=""}catch(l){console.error("Error uploading CSV:",l),A.error(`Failed to upload CSV: ${l.message}`)}finally{N(!1)}}};r.useEffect(()=>{B([])},[m,n,O]);const Ee=x&&i.length===0,_e=X||_.confirmState.isOpen;if(Ee&&!_e)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(Ye,{type:"spinner",message:"Memuat data engineer...",size:"lg"})});const{totalEngineers:se,totalAllEngineers:Te,percentageOfTotal:te,avgExperience:H,completedTraining:Ae,trainingCompletionRate:ae}=be;return e.jsxs(Xe,{title:"Engineers Management",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:G("blue",!0),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:D.kpiTitle,children:"Total Engineers"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:D.kpiValue,children:se}),e.jsxs("span",{className:D.kpiSubtitle,children:["/ ",Te]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-400 transition-all duration-500",style:{width:`${te}%`}})}),e.jsxs("span",{className:"text-xs text-blue-400 font-semibold",children:[te.toFixed(0),"%"]})]})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ‘·"})})]})}),e.jsx("div",{className:G("green",!0),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:D.kpiTitle,children:"Avg Experience"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:D.kpiValue,children:H.toFixed(1)}),e.jsx("span",{className:D.kpiSubtitle,children:"years"})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${H>=4?"bg-green-500/20 text-green-400":H>=2?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:H>=4?"Senior Team":H>=2?"Mid-Level":"Junior Team"})})})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-green-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"â­"})})]})}),e.jsx("div",{className:G("purple",!0),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:D.kpiTitle,children:"Training Completion"}),e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("h3",{className:D.kpiValue,children:[ae.toFixed(0),"%"]})}),e.jsx("div",{className:Ze("mt-3 flex items-center gap-2",D.kpiSubtitle),children:e.jsxs("span",{children:[Ae," of ",se," completed"]})}),e.jsx("div",{className:"mt-2 flex-1 h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-400 transition-all duration-500",style:{width:`${ae}%`}})})]}),e.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“š"})})]})})]}),F.length>0&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:ke,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(de,{size:16})," Hapus (",F.length,")"]})}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("span",{className:"text-slate-400 text-sm font-medium"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>{b("experience"),L("")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="experience"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Experience"}),e.jsx("button",{onClick:()=>{b("region"),L("")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="region"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Region"}),e.jsx("button",{onClick:()=>{b("vendor"),L("")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="vendor"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Vendor"}),e.jsx("button",{onClick:()=>{b("area_group"),L("")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${n==="area_group"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Area Group"})]}),n!=="experience"&&e.jsxs("select",{value:O,onChange:s=>L(s.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:border-blue-500 min-w-[200px]",children:[e.jsxs("option",{value:"",children:["All ",n==="region"?"Regions":n==="vendor"?"Vendors":"Area Groups"]}),n==="region"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"Region 1",children:"Region 1"}),e.jsx("option",{value:"Region 2",children:"Region 2"}),e.jsx("option",{value:"Region 3",children:"Region 3"})]}),n==="vendor"&&[...new Set(i.map(s=>s.vendor).filter(Boolean))].sort().map(s=>e.jsx("option",{value:s,children:s},s)),n==="area_group"&&[...new Set(i.map(s=>s.area_group).filter(Boolean))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:V?"fixed inset-0 z-50 p-6 bg-slate-900":"lg:col-span-8",children:e.jsxs("div",{className:`bg-slate-800 rounded-lg overflow-hidden border border-slate-700 flex flex-col ${V?"h-full":"max-h-[600px]"}`,children:[e.jsxs("div",{className:"px-4 py-3 bg-slate-900 border-b border-slate-700 space-y-3 relative",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Data Engineer"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:[k.length," dari ",i.length," engineer"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>{Y("create"),Z(null);const s=P();w(s),q(!0)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5",children:[e.jsx("span",{className:"text-sm",children:"+"})," Tambah Engineer"]}),e.jsxs("button",{onClick:je,className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5",children:[e.jsx(Le,{size:14})," Export CSV"]}),e.jsxs("label",{className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5 cursor-pointer",children:[e.jsx(Ve,{size:14})," ",o?"Uploading...":"Upload CSV",e.jsx("input",{type:"file",accept:".csv",onChange:Se,className:"hidden",disabled:o})]}),e.jsx("button",{onClick:()=>J(!V),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5",title:V?"Exit Fullscreen":"Fullscreen",children:V?e.jsx(Ie,{size:14}):e.jsx(Re,{size:14})})]})]}),e.jsx("div",{className:"w-full",children:e.jsx(ls,{value:m,onChange:v,placeholder:"Search engineers...",className:"w-full"})})]}),e.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 border-b border-slate-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-300 uppercase tracking-wider w-12",children:e.jsx("input",{type:"checkbox",checked:F.length===k.length&&k.length>0,onChange:we,className:"w-4 h-4 rounded border-slate-600 text-blue-500 focus:ring-blue-500 focus:ring-offset-slate-900 cursor-pointer"})}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider w-48",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider w-32",children:"Region"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider w-40",children:"Area Group"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider w-32",children:"Vendor"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider w-24",children:"Exp"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider w-40",children:"Skills"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-slate-300 uppercase tracking-wider w-24",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:k.map((s,t)=>{var c;const l=C.has(s.id);return e.jsxs(Oe.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-slate-750 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 text-center whitespace-nowrap w-12",children:e.jsx("input",{type:"checkbox",checked:F.includes(s.id),onChange:()=>Ce(s.id),className:"w-4 h-4 rounded border-slate-600 text-blue-500 focus:ring-blue-500 focus:ring-offset-slate-800 cursor-pointer"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap w-48",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>xe(s.id),className:"text-slate-400 hover:text-slate-200 transition-colors",children:l?e.jsx(Pe,{size:14}):e.jsx(Me,{size:14})}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-xs flex-shrink-0",children:((c=s.name)==null?void 0:c.charAt(0))||"?"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-slate-100 truncate",children:s.name||"-"}),e.jsx("div",{className:"text-xs text-slate-400 truncate",children:s.id||"-"})]})]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap w-32",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-500/20 text-blue-400",children:s.region||"-"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-slate-300 w-40 truncate",title:s.area_group||"-",children:s.area_group||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-slate-300 w-32 truncate",title:s.vendor||"-",children:s.vendor||"-"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap w-24",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-500/20 text-green-400",children:s.years_experience||"0"})}),e.jsx("td",{className:"px-3 py-2 w-40",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(()=>{const a=(s.technical_skills_training||"").split(",").map(S=>S.trim()).filter(Boolean);return a.length===0?e.jsx("span",{className:"text-xs text-slate-500",children:"No skills"}):e.jsxs(e.Fragment,{children:[a.slice(0,2).map((S,W)=>e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-500/20 text-purple-400",children:S.replace("Training ","")},W)),a.length>2&&e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded bg-slate-700 text-slate-400",children:["+",a.length-2]})]})})()})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap w-24",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>ve(s),className:"p-1.5 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded transition-colors",title:"Edit",children:e.jsx(Ue,{size:14})}),e.jsx("button",{onClick:()=>Ne(s),className:"p-1.5 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Delete",children:e.jsx(de,{size:14})})]})})]}),l&&e.jsx("tr",{className:"bg-slate-800/50",children:e.jsx("td",{colSpan:8,className:"px-4 py-3",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 text-xs",children:$.filter(h=>!["id","name","region","area_group","vendor","years_experience","technical_skills_training","soft_skills_training"].includes(h)).map(h=>{const a=s[h]||"-",S=h.split("_").map(W=>W.charAt(0).toUpperCase()+W.slice(1)).join(" ");return e.jsxs("div",{className:"border-b border-slate-700/50 pb-2",children:[e.jsx("div",{className:"text-slate-400 font-medium mb-1",children:S}),e.jsx("div",{className:"text-slate-200",children:a})]},h)})})})})]},t)})})]})})]})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsxs("div",{className:"bg-[var(--card-bg)] p-4 rounded-lg relative min-h-[400px] max-h-[600px] flex flex-col border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Training Skill Progress"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-xs text-slate-400",children:[k.length," engineers"]})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800",children:k.length>0?k.map((s,t)=>e.jsx(Qe,{engineer:s},t)):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:"No engineers data available"})})]})})]}),k.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ‘·"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:"Engineer Tidak Ditemukan"}),e.jsx("p",{className:"text-slate-400",children:"Coba sesuaikan filter atau kata kunci pencarian Anda"})]}),X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:z==="create"?"Tambah Engineer Baru":"Edit Engineer"}),e.jsx("button",{onClick:()=>q(!1),className:"text-slate-400 hover:text-slate-200 text-2xl leading-none",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto",children:[E.basic.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-700",children:[e.jsx(ne,{className:"text-green-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Informasi Dasar"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.basic.map(s=>{const t=u[s]||"",l=s.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),c=s==="id"||s==="name",h=T[s]&&T[s].length>0;return s==="id"&&z==="create"?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[R(s),e.jsxs("span",{children:[l," ",c&&e.jsx("span",{className:"text-red-400",children:"*"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-medium pointer-events-none",children:"IDH"}),e.jsx("input",{type:"text",value:t.replace(/^IDH/i,""),onChange:a=>me(a.target.value),maxLength:5,className:"w-full pl-14 pr-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:border-green-500 transition-all",placeholder:"00000"})]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Format: IDH + 5 digit angka (contoh: IDH00001)",t.replace(/^IDH/i,"").length>0&&e.jsxs("span",{className:`ml-2 ${t.replace(/^IDH/i,"").length===5?"text-green-400":"text-yellow-400"}`,children:["(",t.replace(/^IDH/i,"").length,"/5)"]})]})]},s):e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[R(s),e.jsxs("span",{children:[l," ",c&&e.jsx("span",{className:"text-red-400",children:"*"})]})]}),h?e.jsxs("select",{value:t,onChange:a=>w({...u,[s]:a.target.value}),disabled:z==="edit"&&s==="id",className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:border-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsxs("option",{value:"",children:["-- Pilih ",l," --"]}),T[s].map((a,S)=>e.jsx("option",{value:a,children:a},S))]}):e.jsx("input",{type:"text",value:t,onChange:a=>w({...u,[s]:a.target.value}),disabled:z==="edit"&&s==="id",className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:border-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",placeholder:M(s)})]},s)})})]}),E.location.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-700",children:[e.jsx(re,{className:"text-orange-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Informasi Lokasi"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.location.map(s=>{const t=u[s]||"",l=s.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),c=T[s]&&T[s].length>0,h=(s==="latitude"||s==="longitude")&&u.area_group&&U[u.area_group];return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[R(s),e.jsx("span",{children:l}),h&&e.jsx("span",{className:"text-xs text-green-400 font-normal",children:"(Auto-filled)"})]}),c?e.jsxs("select",{value:t,onChange:a=>{s==="area_group"?pe(a.target.value):w({...u,[s]:a.target.value})},className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all",children:[e.jsxs("option",{value:"",children:["-- Pilih ",l," --"]}),T[s].map((a,S)=>e.jsx("option",{value:a,children:a},S))]}):e.jsx("input",{type:"text",value:t,onChange:a=>w({...u,[s]:a.target.value}),readOnly:h,className:`w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all ${h?"bg-slate-600/50 cursor-not-allowed":""}`,placeholder:M(s)})]},s)})})]}),E.experience.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-700",children:[e.jsx(ie,{className:"text-cyan-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Pengalaman"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.experience.map(s=>{const t=u[s]||"",l=s.split("_").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[R(s),e.jsx("span",{children:l})]}),e.jsx("input",{type:"text",value:t,onChange:c=>w({...u,[s]:c.target.value}),className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-cyan-500 transition-all",placeholder:M(s)}),e.jsx("p",{className:"text-xs text-slate-500",children:'Format: "5 Tahun 3 Bulan" atau hanya "5"'})]},s)})})]}),E.skills.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-700",children:[e.jsx(oe,{className:"text-yellow-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Keahlian & Training"})]}),e.jsx("div",{className:"space-y-4",children:E.skills.map(s=>{const t=u[s]||"",l=s.split("_").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[R(s),e.jsx("span",{children:l})]}),e.jsx("textarea",{value:t,onChange:c=>w({...u,[s]:c.target.value}),className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 transition-all resize-none",placeholder:M(s),rows:"3"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Pisahkan setiap keahlian dengan koma (cth: Skill 1, Skill 2, Skill 3)"})]},s)})})]}),E.other.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-slate-700",children:[e.jsx(ce,{className:"text-slate-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Informasi Lainnya"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.other.map(s=>{const t=u[s]||"",l=s.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),c=he(s),h=T[s]&&T[s].length>0;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[R(s),e.jsx("span",{children:l})]}),c?e.jsx("input",{type:"date",value:ge(t),onChange:a=>w({...u,[s]:fe(a.target.value)}),className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}):h?e.jsxs("select",{value:t,onChange:a=>w({...u,[s]:a.target.value}),className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",children:[e.jsxs("option",{value:"",children:["-- Pilih ",l," --"]}),T[s].map((a,S)=>e.jsx("option",{value:a,children:a},S))]}):e.jsx("input",{type:"text",value:t,onChange:a=>w({...u,[s]:a.target.value}),className:"w-full px-4 py-2.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:M(s)})]},s)})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>q(!1),className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-lg font-medium transition-colors",children:"Batal"}),e.jsx("button",{onClick:ye,disabled:!ee,className:`px-6 py-2 rounded-lg font-medium transition-colors ${ee?"bg-blue-500 hover:bg-blue-600 text-white cursor-pointer":"bg-slate-600 text-slate-400 cursor-not-allowed"}`,children:z==="create"?"Buat":"Perbarui"})]})]})})}),e.jsx(We,{isOpen:A.alertState.isOpen,onClose:A.closeAlert,type:A.alertState.type,title:A.alertState.title,message:A.alertState.message,duration:A.alertState.duration}),e.jsx(Je,{isOpen:_.confirmState.isOpen,onClose:_.closeConfirm,onConfirm:_.handleConfirm,title:_.confirmState.title,message:_.confirmState.message,confirmText:_.confirmState.confirmText,cancelText:_.confirmState.cancelText,type:_.confirmState.type,confirmButtonColor:_.confirmState.confirmButtonColor}),p&&e.jsx(Ge,{size:"md",message:"Memproses..."})]})}export{gs as default};
