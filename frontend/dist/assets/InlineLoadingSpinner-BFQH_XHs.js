import{r as b,I as v,ad as y,a5 as j,ae as k,j as e,X as C,af as B,ag as N}from"./vendor-react-DhTDDHjY.js";import{u as p}from"./index-DmJzWoJv.js";function T(u){const{endpoint:l,primaryKey:d="id",eventName:n=null}=u,[f,a]=b.useState(!1),[t,s]=b.useState(null),i=b.useCallback(async x=>{try{a(!0),s(null);const o=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!o.ok){const h=await o.json();throw new Error(h.error||"Failed to create item")}const g=await o.json();return n&&window.dispatchEvent(new Event(n)),g}catch(o){throw s(o.message),o}finally{a(!1)}},[l,n]),r=b.useCallback(async(x,o)=>{try{a(!0),s(null);const g=await fetch(`${l}/${x}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!g.ok){const w=await g.json();throw new Error(w.error||"Failed to update item")}const h=await g.json();return n&&window.dispatchEvent(new Event(n)),h}catch(g){throw s(g.message),g}finally{a(!1)}},[l,n]),c=b.useCallback(async x=>{try{a(!0),s(null);const o=await fetch(`${l}/${x}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!o.ok){const h=await o.json();throw new Error(h.error||"Failed to delete item")}const g=await o.json();return n&&window.dispatchEvent(new Event(n)),g}catch(o){throw s(o.message),o}finally{a(!1)}},[l,n]),m=b.useCallback(async x=>{try{a(!0),s(null);const o=await Promise.all(x.map(g=>fetch(`${l}/${g}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(h=>{if(!h.ok)throw new Error(`Failed to delete item ${g}`);return h.json()})));return n&&window.dispatchEvent(new Event(n)),o}catch(o){throw s(o.message),o}finally{a(!1)}},[l,n]);return{create:i,update:r,remove:c,bulkDelete:m,loading:f,error:t}}const S=()=>{const[u,l]=b.useState({isOpen:!1,type:"info",title:null,message:"",duration:3e3}),d=b.useCallback((i,r="info",c=null,m=3e3)=>{l({isOpen:!0,type:r,title:c,message:i,duration:m})},[]),n=b.useCallback(()=>{l(i=>({...i,isOpen:!1}))},[]),f=b.useCallback((i,r="Berhasil",c=3e3)=>{d(i,"success",r,c)},[d]),a=b.useCallback((i,r="Error",c=5e3)=>{d(i,"error",r,c)},[d]),t=b.useCallback((i,r="Peringatan",c=4e3)=>{d(i,"warning",r,c)},[d]),s=b.useCallback((i,r="Informasi",c=3e3)=>{d(i,"info",r,c)},[d]);return{alertState:u,showAlert:d,closeAlert:n,success:f,error:a,warning:t,info:s}},z=()=>{const[u,l]=b.useState({isOpen:!1,title:"Konfirmasi",message:"",onConfirm:null,confirmText:"Ya",cancelText:"Batal",type:"warning",confirmButtonColor:"bg-blue-600 hover:bg-blue-700"}),d=b.useCallback((a,t,s={})=>{l({isOpen:!0,title:s.title||"Konfirmasi",message:a,onConfirm:t,confirmText:s.confirmText||"Ya",cancelText:s.cancelText||"Batal",type:s.type||"warning",confirmButtonColor:s.confirmButtonColor||"bg-blue-600 hover:bg-blue-700"})},[]),n=b.useCallback(()=>{l(a=>({...a,isOpen:!1,onConfirm:null}))},[]),f=b.useCallback(async()=>{if(u.onConfirm){n();try{await u.onConfirm()}catch{}}else n()},[u,n]);return{confirmState:u,showConfirm:d,closeConfirm:n,handleConfirm:f}},D=({isOpen:u,onClose:l,type:d="info",title:n,message:f,duration:a=3e3})=>{const{isDark:t}=p();if(b.useEffect(()=>{if(u&&a>0){const x=setTimeout(()=>{l()},a);return()=>clearTimeout(x)}},[u,a,l]),!u)return null;const s={dark:{overlay:"bg-black/60",cardBg:"bg-slate-800/95",textMuted:"text-slate-400",closeButton:"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"},light:{overlay:"bg-black/40",cardBg:"bg-white/95",textMuted:"text-gray-600",closeButton:"text-gray-400 hover:text-gray-700 hover:bg-gray-200/50"}},i=t?s.dark:s.light,r={success:{icon:k,iconColor:t?"text-green-400":"text-green-600",iconBg:t?"bg-green-500/20":"bg-green-100",borderColor:t?"border-green-500/50":"border-green-300",bgGradient:t?"from-green-500/10 to-emerald-500/5":"from-green-50 to-emerald-50",titleColor:t?"text-green-300":"text-green-700",messageColor:i.textMuted,buttonColor:"bg-green-600 hover:bg-green-700 text-white"},error:{icon:j,iconColor:t?"text-red-400":"text-red-600",iconBg:t?"bg-red-500/20":"bg-red-100",borderColor:t?"border-red-500/50":"border-red-300",bgGradient:t?"from-red-500/10 to-rose-500/5":"from-red-50 to-rose-50",titleColor:t?"text-red-300":"text-red-700",messageColor:i.textMuted,buttonColor:"bg-red-600 hover:bg-red-700 text-white"},warning:{icon:y,iconColor:t?"text-yellow-400":"text-yellow-600",iconBg:t?"bg-yellow-500/20":"bg-yellow-100",borderColor:t?"border-yellow-500/50":"border-yellow-300",bgGradient:t?"from-yellow-500/10 to-amber-500/5":"from-yellow-50 to-amber-50",titleColor:t?"text-yellow-300":"text-yellow-700",messageColor:i.textMuted,buttonColor:"bg-yellow-600 hover:bg-yellow-700 text-white"},info:{icon:v,iconColor:t?"text-blue-400":"text-blue-600",iconBg:t?"bg-blue-500/20":"bg-blue-100",borderColor:t?"border-blue-500/50":"border-blue-300",bgGradient:t?"from-blue-500/10 to-cyan-500/5":"from-blue-50 to-cyan-50",titleColor:t?"text-blue-300":"text-blue-700",messageColor:i.textMuted,buttonColor:"bg-blue-600 hover:bg-blue-700 text-white"}},c=r[d]||r.info,m=c.icon;return e.jsx("div",{className:`fixed inset-0 ${i.overlay} backdrop-blur-sm flex items-center justify-center z-[9999] p-4`,children:e.jsxs("div",{className:`${i.cardBg} bg-gradient-to-br ${c.bgGradient} rounded-2xl border ${c.borderColor} shadow-2xl w-full max-w-md transform transition-all animate-in fade-in zoom-in duration-200`,children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${c.iconBg} flex items-center justify-center flex-shrink-0`,children:e.jsx(m,{className:c.iconColor,size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[n&&e.jsx("h3",{className:`text-lg font-bold ${c.titleColor} mb-2`,children:n}),e.jsx("p",{className:`text-sm ${c.messageColor} whitespace-pre-line`,children:f})]}),e.jsx("button",{onClick:l,className:`${i.closeButton} p-1 rounded-lg transition-all flex-shrink-0`,children:e.jsx(C,{size:20})})]})}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("button",{onClick:l,className:`w-full px-4 py-2.5 rounded-xl font-medium transition-all ${c.buttonColor} shadow-lg hover:shadow-xl hover:scale-[1.02]`,children:"OK"})})]})})},G=({isOpen:u,onClose:l,onConfirm:d,title:n="Konfirmasi",message:f,confirmText:a="Ya",cancelText:t="Batal",type:s="warning",confirmButtonColor:i="bg-blue-600 hover:bg-blue-700"})=>{const{isDark:r}=p();if(!u)return null;const c={dark:{overlay:"bg-black/60",cardBg:"bg-slate-800/95",text:"text-slate-200",textMuted:"text-slate-300",closeButton:"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50",cancelButton:"bg-slate-700 hover:bg-slate-600 text-slate-200"},light:{overlay:"bg-black/40",cardBg:"bg-white/95",text:"text-gray-900",textMuted:"text-gray-700",closeButton:"text-gray-400 hover:text-gray-700 hover:bg-gray-200/50",cancelButton:"bg-gray-200 hover:bg-gray-300 text-gray-800"}},m=r?c.dark:c.light,x={warning:{icon:y,iconColor:r?"text-yellow-400":"text-yellow-600",iconBg:r?"bg-yellow-500/20":"bg-yellow-100",borderColor:r?"border-yellow-500/50":"border-yellow-300",bgGradient:r?"from-yellow-500/10 to-amber-500/5":"from-yellow-50 to-amber-50",confirmButtonColor:"bg-yellow-600 hover:bg-yellow-700"},danger:{icon:B,iconColor:r?"text-red-400":"text-red-600",iconBg:r?"bg-red-500/20":"bg-red-100",borderColor:r?"border-red-500/50":"border-red-300",bgGradient:r?"from-red-500/10 to-rose-500/5":"from-red-50 to-rose-50",confirmButtonColor:"bg-red-600 hover:bg-red-700"},info:{icon:y,iconColor:r?"text-blue-400":"text-blue-600",iconBg:r?"bg-blue-500/20":"bg-blue-100",borderColor:r?"border-blue-500/50":"border-blue-300",bgGradient:r?"from-blue-500/10 to-cyan-500/5":"from-blue-50 to-cyan-50",confirmButtonColor:"bg-blue-600 hover:bg-blue-700"}},o=x[s]||x.warning,g=o.icon,h=s==="danger"||s==="warning"?o.confirmButtonColor:i,w=async()=>{d&&(l(),await d())};return e.jsx("div",{className:`fixed inset-0 ${m.overlay} backdrop-blur-sm flex items-center justify-center z-[9999] p-4`,children:e.jsxs("div",{className:`${m.cardBg} bg-gradient-to-br ${o.bgGradient} rounded-2xl border ${o.borderColor} shadow-2xl w-full max-w-md transform transition-all animate-in fade-in zoom-in duration-200`,children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${o.iconBg} flex items-center justify-center flex-shrink-0`,children:e.jsx(g,{className:o.iconColor,size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`text-lg font-bold ${m.text} mb-2`,children:n}),e.jsx("p",{className:`text-sm ${m.textMuted} whitespace-pre-line`,children:f})]}),e.jsx("button",{onClick:l,className:`${m.closeButton} p-1 rounded-lg transition-all flex-shrink-0`,children:e.jsx(C,{size:20})})]})}),e.jsxs("div",{className:"px-6 pb-6 flex gap-3",children:[e.jsxs("button",{onClick:l,className:`flex-1 px-4 py-2.5 rounded-xl font-medium ${m.cancelButton} transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2`,children:[e.jsx(C,{size:18}),t]}),e.jsxs("button",{onClick:w,className:`flex-1 px-4 py-2.5 rounded-xl font-medium text-white transition-all shadow-lg hover:shadow-xl hover:scale-[1.02] flex items-center justify-center gap-2 ${h}`,children:[e.jsx(N,{size:18}),a]})]})]})})},M=({size:u="md",message:l=null})=>{const{isDark:d}=p(),n={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-14 h-14 border-4"},f=d?"border-slate-600 border-t-cyan-400":"border-gray-300 border-t-blue-600",a=d?"text-slate-300":"text-gray-700";return e.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[10000] pointer-events-none",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:`${n[u]} ${f} rounded-full animate-spin`,style:{boxShadow:d?"0 0 20px rgba(34, 211, 238, 0.3)":"0 0 20px rgba(37, 99, 235, 0.3)"}})}),l&&e.jsx("div",{className:`text-sm font-medium ${a} animate-pulse bg-opacity-90 px-3 py-1.5 rounded-lg ${d?"bg-slate-800/90":"bg-white/90"} shadow-lg`,children:l})]})})};export{D as C,M as I,z as a,T as b,G as c,S as u};
