import{r as o,j as e,H as Se,a1 as pt,c as gt,D as $s,F as bt,a2 as Es,a3 as Ls,I as Us,K as Rs,O as jt,Q as ft,V as Nt,W as yt,z as vt,a0 as Bs,a4 as wt,$ as kt,X as le,o as oe,p as ce,t as de,q as xe,s as he}from"./vendor-react-C0jbZujj.js";import{a as Ct}from"./useEngineerData-B64tYS1F.js";import{u as St,a as Wt,C as _t}from"./CustomConfirm-CneD7qTP.js";import{u as Mt}from"./useMachineKPIs-Ba5bYdKS.js";import{u as Ot,C as At,I as Tt}from"./InlineLoadingSpinner-C9ma32qp.js";import{P as Dt}from"./PageLayout-CILpPulD.js";import{L as zt,c as $,T as G,g as me}from"./index-BT-vs0to.js";import"./vendor-maps-C_U1R0uQ.js";import"./textUtils-DatDPYXU.js";function It(m,{debouncedSearch:T,sortBy:O,sortValue:N}){return o.useMemo(()=>{let j=m;if(T){const f=T.toLowerCase();j=j.filter(y=>{var k,_,d,v;return((k=y.branch_name)==null?void 0:k.toLowerCase().includes(f))||((_=y.wsid)==null?void 0:_.toLowerCase().includes(f))||((d=y.customer)==null?void 0:d.toLowerCase().includes(f))||((v=y.city)==null?void 0:v.toLowerCase().includes(f))})}return O==="region"&&N?j=j.filter(f=>f.region===N):O==="area_group"&&N?j=j.filter(f=>f.area_group===N):O==="warranty"&&N?j=j.filter(f=>{const y=f.machine_status||"";return N==="On Warranty"?y==="In Warranty"||y==="On Warranty":N==="Out Of Warranty"?y==="Out Of Warranty"||y.toLowerCase().includes("expired"):y===N}):O==="maintenance"&&N?j=j.filter(f=>f.maintenance_status===N):O==="customer"&&N&&(j=j.filter(f=>f.customer===N)),j},[m,T,O,N])}function Ft({create:m,update:T,remove:O,bulkDelete:N,setModalMode:j,setFormData:f,setCrudShowModal:y,setSelectedMachines:k,resetForm:_}){const d=Ot(),v=St(),V=o.useMemo(()=>_||(()=>{}),[_]),re=o.useCallback(p=>{j("edit");const w={};Object.keys(p).forEach(A=>{w[A]=p[A]||""}),f(w),y(!0)},[j,f,y]),Q=o.useCallback(async p=>{v.showConfirm(`Apakah Anda yakin ingin menghapus mesin ${p.wsid}?`,async()=>{try{await O(p.wsid),d.success("Mesin berhasil dihapus!")}catch(w){console.error("Error deleting machine:",w),d.error(`Gagal menghapus mesin: ${w.message||"Terjadi kesalahan"}`)}},{title:"Hapus Mesin?",type:"danger",confirmText:"Hapus",cancelText:"Batal"})},[O,d,v]),ue=o.useCallback(async(p,w)=>{if(!p||Object.keys(p).length===0){d.warning("Form data tidak valid. Silakan coba lagi.");return}if(!p.wsid||p.wsid.trim()===""){d.warning("WSID wajib diisi!");return}if(!p.branch_name||p.branch_name.trim()===""){d.warning("Nama Cabang wajib diisi!");return}const A=w==="create"?"menambahkan":"memperbarui";v.showConfirm(`Apakah Anda yakin ingin ${A} mesin ini?

WSID: ${p.wsid}
Nama Cabang: ${p.branch_name}

Data akan ${A} ke database.`,async()=>{try{w==="create"?(await m(p),d.success("Mesin berhasil ditambahkan!")):(await T(p.wsid,p),d.success("Mesin berhasil diperbarui!")),y(!1),V()}catch(ne){console.error("Error saving machine:",ne),d.error(`Gagal ${A} mesin: ${ne.message||"Terjadi kesalahan"}`)}},{title:`Konfirmasi ${A==="menambahkan"?"Tambah":"Update"} Mesin`,type:"info",confirmText:"Simpan",cancelText:"Batal"})},[m,T,y,V,d,v]),L=o.useCallback((p,w)=>{k(p.target.checked?w.map(A=>A.wsid):[])},[k]),pe=o.useCallback((p,w)=>{k(w.includes(p)?w.filter(A=>A!==p):[...w,p])},[k]),We=o.useCallback(async p=>{if(p.length===0){d.warning("Pilih mesin yang ingin dihapus");return}v.showConfirm(`Apakah Anda yakin ingin menghapus ${p.length} mesin?

Tindakan ini tidak dapat dibatalkan.`,async()=>{try{await N(p),d.success(`Berhasil menghapus ${p.length} mesin!`),k([])}catch(w){console.error("Error deleting machines:",w),d.error(`Gagal menghapus mesin: ${w.message||"Terjadi kesalahan"}`)}},{title:"Hapus Multiple Mesin?",type:"danger",confirmText:"Hapus",cancelText:"Batal"})},[N,k,d,v]);return{handleEdit:re,handleDelete:Q,handleSave:ue,handleSelectAll:L,handleSelectOne:pe,handleBulkDelete:We,alert:d,confirm:v}}function $t(m){if(!m||m.length===0){alert("No data to export");return}const T=new Set;m.forEach(_=>{Object.keys(_).forEach(d=>{T.add(d)})});const O=Array.from(T).sort(),N=m.map(_=>{const d={};return O.forEach(v=>{d[v]=_[v]!==void 0&&_[v]!==null?String(_[v]):""}),d}),j=O,f=[j.join(","),...N.map(_=>j.map(d=>{const v=_[d]||"";return`"${String(v).replace(/"/g,'""')}"`}).join(","))].join(`
`),y=new Blob([f],{type:"text/csv;charset=utf-8;"}),k=document.createElement("a");k.href=URL.createObjectURL(y),k.download=`machines_${new Date().toISOString().split("T")[0]}.csv`,k.click()}function Ht(){var Ge,Ke,Ye,Ve,He,Je,qe,Xe,Ze,Qe,es,ss,ts,as,ls,rs,ns,is,os,cs,ds,xs,hs,ms,us,ps,gs,bs,js,fs,Ns,ys,vs,ws,ks,Cs,Ss,Ws,_s,Ms,Os,As,Ts,Ds,zs,Is,Fs;const{rows:m,loading:T}=Ct(),{create:O,update:N,remove:j,bulkDelete:f,loading:y}=Wt({endpoint:"/api/machines",primaryKey:"wsid",eventName:"machineDataChanged"}),[k,_]=o.useState(""),[d,v]=o.useState("all"),[V,re]=o.useState(""),[Q,ue]=o.useState(!1),[L,pe]=o.useState([]),[We,p]=o.useState(!1),[w,A]=o.useState(null),[ne,Ps]=o.useState(""),[E,ge]=o.useState(1),[H]=o.useState(50),[_e,Me]=o.useState(!1),[Gs,Oe]=o.useState(!1),[Ks,Ae]=o.useState(!1),[Ys,Te]=o.useState(!1),[Vs,De]=o.useState(!1),[Hs,ze]=o.useState(!1),U=o.useMemo(()=>{if(!m||m.length===0)return[];const s=new Set;return m.forEach(t=>{Object.keys(t).forEach(a=>{s.add(a)})}),Array.from(s).sort()},[m]),ee=o.useCallback(()=>{const s={};return U.length>0&&U.forEach(t=>{s[t]=""}),s},[U]),[Ie,se]=o.useState(!1),[K,ie]=o.useState("create"),[g,b]=o.useState({}),[Fe,$e]=o.useState(!1);o.useEffect(()=>{U.length>0&&!Fe&&(b(ee()),$e(!0))},[U,Fe,ee]);const be=o.useCallback(()=>{const s=ee();b(s),$e(!1),ie("create")},[ee]);o.useEffect(()=>{const s=setTimeout(()=>{Ps(k),ge(1)},300);return()=>clearTimeout(s)},[k]),o.useEffect(()=>{ge(1)},[d,V]);const J=o.useCallback(s=>s.includes("wsid")||s.includes("id")?e.jsx(Se,{size:16,className:"text-blue-400"}):s.includes("branch")||s.includes("name")?e.jsx(pt,{size:16,className:"text-green-400"}):s.includes("customer")?e.jsx(gt,{size:16,className:"text-purple-400"}):s.includes("city")||s.includes("region")||s.includes("area")||s.includes("provinsi")||s.includes("address")?e.jsx($s,{size:16,className:"text-orange-400"}):s.includes("year")||s.includes("date")||s.includes("instal")?e.jsx(bt,{size:16,className:"text-cyan-400"}):s.includes("status")||s.includes("maintenance")||s.includes("warranty")?e.jsx(Es,{size:16,className:"text-yellow-400"}):s.includes("type")||s.includes("model")||s.includes("software")||s.includes("service")?e.jsx(Ls,{size:16,className:"text-pink-400"}):e.jsx(Us,{size:16,className:"text-slate-400"}),[]),te=o.useCallback(s=>s==="wsid"?"Contoh: WS001234":s==="branch_name"?"Nama cabang/lokasi mesin":s==="customer"?"Nama customer/pemilik":s==="machine_type"?"Tipe mesin (cth: ATM, CRM)":s==="year"?"Tahun instalasi (cth: 2023)":s==="city"?"Kota lokasi mesin":s==="provinsi"?"Provinsi lokasi mesin":s==="area_group"?"Area group (cth: JAKARTA 1)":s==="region"?"Region (Region 1/2/3)":s==="address"?"Alamat lengkap lokasi mesin (cth: Jl. Sudirman No. 123)":`Masukkan ${s.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ").toLowerCase()}`,[]),M=o.useMemo(()=>{const s={};if(!m||m.length===0)return s;const t=["address","wsid","branch_name","year"],a={};m.forEach(n=>{Object.keys(n).forEach(u=>{if(t.includes(u.toLowerCase()))return;const h=n[u];h!=null&&h!==""&&(a[u]||(a[u]=new Set),a[u].add(String(h).trim()))})});const i=["region","area_group","machine_type","city","provinsi","customer","model","distance","maintenance_status","service_hour","software_version","island","zona","machine_status","vendor"],c=Object.keys(a).filter(n=>t.includes(n.toLowerCase())||n.includes("date")||n.includes("year")||n==="wsid"||n==="sn"||n==="branch_name"||n==="sub_region"||n==="response_resolution"||n==="warranty_stop"||n==="software_cu_model"?!1:a[n].size>2);return[...new Set([...i,...c])].filter(n=>!t.includes(n.toLowerCase())).forEach(n=>{const u=new Set;m.forEach(h=>{const F=h[n];F!=null&&F!==""&&u.add(String(F).trim())}),s[n]=Array.from(u).sort()}),s},[m]),je=o.useCallback(s=>s.includes("date")||s.includes("instal")||s==="warranty_start"||s==="warranty_end",[]),fe=o.useCallback(s=>{if(!s)return"";if(s.includes("-")){const t=s.split("-");if(t.length===3){const a=t[0].padStart(2,"0"),i=t[1].padStart(2,"0");let c=t[2];return c.length===2&&(c="20"+c),`${c}-${i}-${a}`}}return""},[]),Ne=o.useCallback(s=>{if(!s)return"";if(s.includes("-")&&s.length===10){const t=s.split("-");return`${t[2]}-${t[1]}-${t[0]}`}return s},[]),D=o.useMemo(()=>{const s={basic:["wsid","branch_name","customer","machine_type","model","sn"],location:["address","city","provinsi","area_group","region","zona"],status:["machine_status","maintenance_status","warranty_start","warranty_end"],technical:["instal_date","year","distance","response_time","resolution_time"],other:[]};return U.forEach(t=>{if(t==="sub_region"||t==="response_resolution"||t==="warranty_stop"||t==="software_cu_model")return;let a=!1;for(const[i,c]of Object.entries(s))if(c.some(l=>t.includes(l)||l.includes(t))){s[i].includes(t)||s[i].push(t),a=!0;break}a||s.other.push(t)}),s},[U]),r=It(m,{debouncedSearch:ne,sortBy:d,sortValue:V}),ye=Math.ceil(r.length/H),ve=o.useMemo(()=>{const s=(E-1)*H;return r.slice(s,s+H)},[r,E,H]),Js=Mt(r,m),{totalMachines:Ee,onWarranty:we,outOfWarranty:qs,warrantyRemaining:Y,topAreaGroups:Et,topCustomers:R}=Js,q=Ee>0?we/Ee*100:0,x=o.useMemo(()=>{if(!r||r.length===0)return{totalOnWarranty:0,expiringSoonMachines:[],distribution:{critical:0,warning:0,good:0},timeRanges:{"0-30 hari":0,"31-90 hari":0,"91-180 hari":0,"181-365 hari":0,"> 365 hari":0},avgRemaining:{avgDays:0,avgMonths:0,avgYears:0}};const s=(l,n=2)=>{if(!l)return{days:0,expired:!0,status:"expired"};const u=parseInt(l)||new Date().getFullYear(),h=new Date,ut=new Date(u+n,11,31)-h,ae=Math.ceil(ut/(1e3*60*60*24));if(ae<0)return{days:0,expired:!0,status:"expired"};let Ce="good";return ae<90?Ce="critical":ae<180&&(Ce="warning"),{days:ae,expired:!1,status:Ce,months:Math.floor(ae/30)}},t=r.filter(l=>l.machine_status==="On Warranty"||l.machine_status==="In Warranty").map(l=>({...l,warrantyInfo:s(l.year,2)})).filter(l=>!l.warrantyInfo.expired),a=t.filter(l=>l.warrantyInfo.status==="critical").sort((l,n)=>l.warrantyInfo.days-n.warrantyInfo.days).slice(0,10),i=t.reduce((l,n)=>(l[n.warrantyInfo.status]=(l[n.warrantyInfo.status]||0)+1,l),{critical:0,warning:0,good:0}),c={"0-30 hari":t.filter(l=>l.warrantyInfo.days<=30).length,"31-90 hari":t.filter(l=>l.warrantyInfo.days>30&&l.warrantyInfo.days<=90).length,"91-180 hari":t.filter(l=>l.warrantyInfo.days>90&&l.warrantyInfo.days<=180).length,"181-365 hari":t.filter(l=>l.warrantyInfo.days>180&&l.warrantyInfo.days<=365).length,"> 365 hari":t.filter(l=>l.warrantyInfo.days>365).length};return{totalOnWarranty:t.length,expiringSoonMachines:a,distribution:i,timeRanges:c,avgRemaining:Y}},[r,Y]),B=o.useMemo(()=>{if(!r||r.length===0)return[];const s={};return r.forEach(t=>{let i=(t.area_group||"Unknown").trim().toUpperCase();i=i.replace(/\s+\d+$/,""),i==="SURABAYA KOTA"&&(i="SURABAYA"),s[i]=(s[i]||0)+1}),Object.entries(s).sort((t,a)=>a[1]-t[1]).slice(0,3)},[r]);o.useMemo(()=>{const s=new Date().getFullYear(),t=r.map(a=>s-parseInt(a.year||s)).filter(a=>a>=0);return t.length>0?t.reduce((a,i)=>a+i,0)/t.length:0},[r]);const P=o.useMemo(()=>{const s={};return r.forEach(t=>{const a=t.machine_type||"Unknown";s[a]=(s[a]||0)+1}),Object.entries(s).sort((t,a)=>a[1]-t[1]).slice(0,3)},[r]),W=o.useMemo(()=>{const s={};return r.forEach(t=>{const a=t.machine_type||"Unknown";s[a]=(s[a]||0)+1}),Object.entries(s).sort((t,a)=>a[1]-t[1])},[r]),C=o.useMemo(()=>{const s={};return r.forEach(t=>{let i=(t.area_group||"Unknown").trim().toUpperCase();i=i.replace(/\s+\d+$/,""),i==="SURABAYA KOTA"&&(i="SURABAYA"),s[i]=(s[i]||0)+1}),Object.entries(s).sort((t,a)=>a[1]-t[1])},[r]),S=o.useMemo(()=>{const s={};return r.forEach(t=>{const a=t.customer||"Unknown";s[a]=(s[a]||0)+1}),Object.entries(s).sort((t,a)=>a[1]-t[1])},[r]);o.useMemo(()=>new Set(r.map(t=>t.region).filter(Boolean)).size,[r]),o.useMemo(()=>new Set(r.map(t=>t.customer).filter(Boolean)).size,[r]),o.useMemo(()=>{const s={};return r.forEach(t=>{const a=t.maintenance_status||"Unknown";s[a]=(s[a]||0)+1}),s},[r]);const Le=o.useMemo(()=>x!=null&&x.timeRanges?Object.entries(x.timeRanges).map(([s,t])=>({name:s,value:t})):[],[x==null?void 0:x.timeRanges]),Xs=o.useMemo(()=>(W||[]).slice(0,10).map(([s,t])=>({name:s,value:t})),[W]),Zs=o.useMemo(()=>(C||[]).slice(0,10).map(([s,t])=>({name:s,value:t})),[C]),Qs=o.useMemo(()=>(S||[]).slice(0,10).map(([s,t])=>({name:s,value:t})),[S]),ke=o.useMemo(()=>{const s=new Map;return!m||m.length===0||m.forEach(t=>{const a=(t.address||"").trim().toLowerCase();if(a&&t.city&&t.provinsi&&t.area_group){const i=a.replace(/\s+/g," ").trim();s.has(i)||s.set(i,{city:t.city,provinsi:t.provinsi,area_group:t.area_group})}}),s},[m]),Ue=o.useMemo(()=>{const s=new Map;return!m||m.length===0||m.forEach(t=>{const a=(t.distance||"").toString().trim();a&&t.response_time&&t.resolution_time&&(s.has(a)||s.set(a,{response_time:t.response_time,resolution_time:t.resolution_time}))}),s},[m]),Re=o.useMemo(()=>{const s=new Map;return!m||m.length===0||m.forEach(t=>{const a=(t.zona||"").toString().trim();a&&t.distance&&t.response_time&&t.resolution_time&&(s.has(a)||s.set(a,{distance:t.distance,response_time:t.response_time,resolution_time:t.resolution_time}))}),s},[m]),et=o.useCallback(s=>{const t=s.trim().toLowerCase().replace(/\s+/g," ");let a=ke.get(t);if(!a)for(const[i,c]of ke.entries()){const l=i.split(" ").filter(h=>h.length>3),n=t.split(" ").filter(h=>h.length>3);if(l.filter(h=>n.some(F=>F.includes(h)||h.includes(F))).length>=2){a=c;break}}b(a?i=>({...i,address:s,city:a.city,provinsi:a.provinsi,area_group:a.area_group}):i=>({...i,address:s}))},[ke]),Be=o.useCallback(s=>{const t=s.toString().trim(),a=Ue.get(t);b(a?i=>({...i,distance:s,response_time:a.response_time,resolution_time:a.resolution_time}):i=>({...i,distance:s}))},[Ue]),st=o.useCallback(s=>{const t=s.toString().trim(),a=Re.get(t);b(a?i=>({...i,zona:s,distance:a.distance,response_time:a.response_time,resolution_time:a.resolution_time}):i=>({...i,zona:s}))},[Re]),X=Ft({create:O,update:N,remove:j,bulkDelete:f,setModalMode:ie,setFormData:b,setCrudShowModal:se,setSelectedMachines:pe,resetForm:be}),{alert:z,confirm:I}=X,tt=s=>{ie("edit");const t={};Object.keys(s).forEach(a=>{t[a]=s[a]||""}),U.forEach(a=>{a in t||(t[a]="")}),b(t),se(!0)},at=s=>{X.handleDelete(s)},lt=async()=>{if(!g||Object.keys(g).length===0){z.warning("Form data tidak valid. Silakan coba lagi.");return}await X.handleSave(g,K)},rt=s=>{X.handleSelectAll(s,r)},nt=s=>{X.handleSelectOne(s,L)},it=async()=>{await X.handleBulkDelete(L)},ot=s=>{_(s.target.value)},Z=s=>{v(s),re("")},ct=s=>{re(s)},Pe=s=>{ge(s)},dt=()=>{$t(r)},xt=async s=>{const t=s.target.files[0];if(t){if(!t.name.endsWith(".csv")){z.warning("Silakan upload file CSV");return}Me(!0);try{const a=new FormData;a.append("file",t),a.append("target","machines");const i=await fetch("/api/upload",{method:"POST",body:a});if(!i.ok){const c=await i.json();throw new Error(c.error||"Failed to upload CSV")}z.success("CSV uploaded successfully!","Upload Berhasil"),window.dispatchEvent(new Event("machineDataChanged")),s.target.value=""}catch(a){console.error("Error uploading CSV:",a),z.error(`Failed to upload CSV: ${a.message}`)}finally{Me(!1)}}},ht=T&&m.length===0,mt=Ie||I.confirmState.isOpen;return ht&&!mt?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(zt,{type:"spinner",message:"Memuat data mesin...",size:"lg"})}):e.jsxs(Dt,{title:"Machines Management",children:[L.length>0&&e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:it,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(Rs,{size:16})," Hapus (",L.length,")"]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:$(me("green",!0),"min-h-[400px] max-h-[500px] flex flex-col overflow-hidden"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:G.kpiTitle,children:"Coverage Garansi"}),e.jsxs("h3",{className:G.kpiValue,children:[q.toFixed(1),"%"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>Oe(!0),className:"text-slate-400 hover:text-green-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-green-600/20 hover:bg-green-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})})]}),e.jsxs("div",{className:"mt-4 flex-shrink-0",children:[e.jsxs("div",{className:"w-full h-4 bg-slate-700 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 transition-all duration-500",style:{width:`${q}%`}}),e.jsx("div",{className:"absolute top-0 right-0 h-full bg-gradient-to-r from-red-500 to-red-400 transition-all duration-500",style:{width:`${100-q}%`}})]}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),e.jsxs("span",{className:"text-green-400 font-semibold",children:[we.toLocaleString()," aktif"]}),e.jsxs("span",{className:"text-slate-500",children:["(",q.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400"}),e.jsxs("span",{className:"text-red-400 font-semibold",children:[qs.toLocaleString()," expired"]}),e.jsxs("span",{className:"text-slate-500",children:["(",(100-q).toFixed(1),"%)"]})]})]})]}),Y&&Y.avgDays>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50 flex-1 flex flex-col min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:"â±ï¸"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Rata-rata Sisa"})]}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:Y.avgMonths>0?`${Y.avgMonths} bulan`:`${Y.avgDays} hari`})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs text-slate-400",children:"Total Aktif"})}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:we.toLocaleString()})]})]}),x&&x.expiringSoonMachines&&x.expiringSoonMachines.length>0&&e.jsxs("div",{className:"mb-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-xs text-slate-400 font-semibold flex items-center gap-1",children:[e.jsx("span",{children:"âš ï¸"})," Mesin yang Expiring Soon"]}),x.expiringSoonMachines.length>3&&e.jsx("button",{onClick:()=>Ae(!0),className:"text-xs text-green-400 hover:text-green-300 transition-colors font-semibold",children:"Lihat Detail â†’"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"text-left py-1 px-2 text-slate-400 font-semibold",children:"#"}),e.jsx("th",{className:"text-left py-1 px-2 text-slate-400 font-semibold",children:"WSID"}),e.jsx("th",{className:"text-left py-1 px-2 text-slate-400 font-semibold",children:"Area"}),e.jsx("th",{className:"text-right py-1 px-2 text-slate-400 font-semibold",children:"Sisa"})]})}),e.jsx("tbody",{children:x.expiringSoonMachines.slice(0,3).map((s,t)=>e.jsxs("tr",{className:"border-b border-slate-700/30 hover:bg-slate-800/50 transition-colors last:border-b-0",children:[e.jsx("td",{className:"py-1 px-2 text-slate-300 font-mono",children:t+1}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("div",{className:"text-slate-200 font-mono truncate max-w-[120px]",title:s.wsid||"Unknown",children:s.wsid||"Unknown"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("div",{className:"text-slate-400 truncate max-w-[100px]",title:s.area_group||"Unknown",children:s.area_group||"Unknown"})}),e.jsx("td",{className:"py-1 px-2 text-right",children:e.jsxs("div",{className:`font-bold ${s.warrantyInfo.days<=30?"text-red-400":s.warrantyInfo.days<=60?"text-orange-400":"text-yellow-400"}`,children:[s.warrantyInfo.days," hari"]})})]},t))})]})})]}),e.jsx("div",{className:"mt-auto pt-3 border-t border-slate-700/50 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-slate-400",children:["Total Mesin: ",e.jsx("span",{className:"text-slate-200 font-semibold",children:r.length.toLocaleString()})]}),e.jsxs("div",{className:"text-slate-400",children:["Coverage: ",e.jsxs("span",{className:"text-green-400 font-semibold",children:[q.toFixed(1),"%"]})]})]})})]})]}),e.jsxs("div",{className:$(me("purple",!0),"min-h-[400px] max-h-[500px] flex flex-col overflow-hidden"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:G.kpiTitle,children:"Tipe Mesin Populer"}),e.jsx("h3",{className:$(G.heading3,"truncate break-words"),title:(Ge=P[0])==null?void 0:Ge[0],children:((Ke=P[0])==null?void 0:Ke[0])||"N/A"}),e.jsxs("p",{className:$("text-xs text-purple-400 mt-1"),children:[((Ye=P[0])==null?void 0:Ye[1])||0," unit â€¢ ",r.length>0?((((Ve=P[0])==null?void 0:Ve[1])||0)/r.length*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>Te(!0),className:"text-slate-400 hover:text-purple-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-purple-600/20 hover:bg-purple-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Total Tipe"}),e.jsx("div",{className:"text-lg font-bold text-purple-400",children:Object.keys(r.reduce((s,t)=>(s[t.machine_type||"Unknown"]=!0,s),{})).length})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Dominasi"}),e.jsxs("div",{className:"text-lg font-bold text-purple-400",children:[r.length>0?((((He=P[0])==null?void 0:He[1])||0)/r.length*100).toFixed(0):0,"%"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 min-h-0",children:P.map(([s,t],a)=>{const i=r.length>0?t/r.length*100:0,c=r.filter(n=>(n.machine_type||"Unknown")===s).reduce((n,u)=>(u.machine_status==="On Warranty"||u.machine_status==="In Warranty"?n.onWarranty++:n.outOfWarranty++,n),{onWarranty:0,outOfWarranty:0}),l=t>0?c.onWarranty/t*100:0;return e.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 border border-slate-700/50",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs("div",{className:`w-6 h-6 rounded flex items-center justify-center text-xs font-bold ${a===0?"bg-purple-500/20 text-purple-400":a===1?"bg-purple-600/20 text-purple-400":"bg-purple-700/20 text-purple-400"}`,children:["#",a+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-200 truncate",title:s,children:s}),e.jsxs("div",{className:"text-xs text-slate-400",children:[t," unit â€¢ ",i.toFixed(1),"%"]})]})]})}),e.jsx("div",{className:"w-full h-2 bg-slate-700/50 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:`h-full transition-all duration-500 ${a===0?"bg-gradient-to-r from-purple-400 to-purple-500":a===1?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gradient-to-r from-purple-600 to-purple-700"}`,style:{width:`${i}%`}})}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{className:"text-slate-400",children:"On: "}),e.jsx("span",{className:"text-green-400 font-semibold",children:c.onWarranty}),e.jsxs("span",{className:"text-slate-500",children:["(",l.toFixed(0),"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400"}),e.jsx("span",{className:"text-slate-400",children:"Out: "}),e.jsx("span",{className:"text-red-400 font-semibold",children:c.outOfWarranty})]})]})]},a)})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700/50 flex-shrink-0",children:e.jsxs("div",{className:"text-xs text-slate-400",children:["ðŸ’¡ ",e.jsx("span",{className:"text-slate-300 font-semibold",children:((Je=P[0])==null?void 0:Je[0])||"Tidak ada data"})," mendominasi dengan ",r.length>0?((((qe=P[0])==null?void 0:qe[1])||0)/r.length*100).toFixed(1):0,"% dari total mesin"]})})]}),e.jsxs("div",{className:$(me("orange",!0),"min-h-[400px] max-h-[500px] flex flex-col overflow-hidden"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:G.kpiTitle,children:"Area Group Mesin Terbanyak"}),e.jsx("h3",{className:$(G.heading3,"truncate break-words"),title:(Xe=B[0])==null?void 0:Xe[0],children:((Ze=B[0])==null?void 0:Ze[0])||"N/A"}),e.jsxs("p",{className:$("text-xs text-orange-400 mt-1"),children:[((Qe=B[0])==null?void 0:Qe[1])||0," unit â€¢ ",r.length>0?((((es=B[0])==null?void 0:es[1])||0)/r.length*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>De(!0),className:"text-slate-400 hover:text-orange-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-orange-600/20 hover:bg-orange-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Total Area"}),e.jsx("div",{className:"text-lg font-bold text-orange-400",children:C.length})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Dominasi"}),e.jsxs("div",{className:"text-lg font-bold text-orange-400",children:[r.length>0?((((ss=B[0])==null?void 0:ss[1])||0)/r.length*100).toFixed(0):0,"%"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 min-h-0",children:B.map(([s,t],a)=>{const i=r.length>0?t/r.length*100:0,c=r.filter(n=>{let h=(n.area_group||"Unknown").trim().toUpperCase();return h=h.replace(/\s+\d+$/,""),h==="SURABAYA KOTA"&&(h="SURABAYA"),h===s}).reduce((n,u)=>(u.machine_status==="On Warranty"||u.machine_status==="In Warranty"?n.onWarranty++:n.outOfWarranty++,n),{onWarranty:0,outOfWarranty:0}),l=t>0?c.onWarranty/t*100:0;return e.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 border border-slate-700/50",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs("div",{className:`w-6 h-6 rounded flex items-center justify-center text-xs font-bold ${a===0?"bg-orange-500/20 text-orange-400":a===1?"bg-orange-600/20 text-orange-400":"bg-orange-700/20 text-orange-400"}`,children:["#",a+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-200 truncate",title:s,children:s}),e.jsxs("div",{className:"text-xs text-slate-400",children:[t," unit â€¢ ",i.toFixed(1),"%"]})]})]})}),e.jsx("div",{className:"w-full h-2 bg-slate-700/50 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:`h-full transition-all duration-500 ${a===0?"bg-gradient-to-r from-orange-400 to-orange-500":a===1?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gradient-to-r from-orange-600 to-orange-700"}`,style:{width:`${i}%`}})}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{className:"text-slate-400",children:"On: "}),e.jsx("span",{className:"text-green-400 font-semibold",children:c.onWarranty}),e.jsxs("span",{className:"text-slate-500",children:["(",l.toFixed(0),"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400"}),e.jsx("span",{className:"text-slate-400",children:"Out: "}),e.jsx("span",{className:"text-red-400 font-semibold",children:c.outOfWarranty})]})]})]},a)})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700/50 flex-shrink-0",children:e.jsxs("div",{className:"text-xs text-slate-400",children:["ðŸ’¡ ",e.jsx("span",{className:"text-slate-300 font-semibold",children:((ts=B[0])==null?void 0:ts[0])||"Tidak ada data"})," mendominasi dengan ",r.length>0?((((as=B[0])==null?void 0:as[1])||0)/r.length*100).toFixed(1):0,"% dari total mesin"]})})]}),e.jsxs("div",{className:$(me("cyan",!0),"min-h-[400px] max-h-[500px] flex flex-col overflow-hidden"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:G.kpiTitle,children:"Top Customer"}),e.jsx("h3",{className:$(G.heading3,"truncate break-words"),title:(ls=R[0])==null?void 0:ls.name,children:((rs=R[0])==null?void 0:rs.name)||"N/A"}),e.jsxs("p",{className:$("text-xs text-cyan-400 mt-1"),children:[((ns=R[0])==null?void 0:ns.value)||0," unit â€¢ ",r.length>0?((((is=R[0])==null?void 0:is.value)||0)/r.length*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>ze(!0),className:"text-slate-400 hover:text-cyan-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-cyan-600/20 hover:bg-cyan-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Total Customer"}),e.jsx("div",{className:"text-lg font-bold text-cyan-400",children:S.length})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-2 border border-slate-700/50",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Dominasi"}),e.jsxs("div",{className:"text-lg font-bold text-cyan-400",children:[r.length>0?((((os=R[0])==null?void 0:os.value)||0)/r.length*100).toFixed(0):0,"%"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-1 min-h-0",children:R.slice(0,3).map((s,t)=>{const a=r.length>0?s.value/r.length*100:0,i=r.filter(l=>(l.customer||"Unknown")===s.name).reduce((l,n)=>(n.machine_status==="On Warranty"||n.machine_status==="In Warranty"?l.onWarranty++:l.outOfWarranty++,l),{onWarranty:0,outOfWarranty:0}),c=s.value>0?i.onWarranty/s.value*100:0;return e.jsxs("div",{className:"bg-slate-800/30 rounded-lg p-3 border border-slate-700/50",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsxs("div",{className:`w-6 h-6 rounded flex items-center justify-center text-xs font-bold ${t===0?"bg-cyan-500/20 text-cyan-400":t===1?"bg-cyan-600/20 text-cyan-400":"bg-cyan-700/20 text-cyan-400"}`,children:["#",t+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-200 truncate",title:s.name,children:s.name}),e.jsxs("div",{className:"text-xs text-slate-400",children:[s.value," unit â€¢ ",a.toFixed(1),"%"]})]})]})}),e.jsx("div",{className:"w-full h-2 bg-slate-700/50 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:`h-full transition-all duration-500 ${t===0?"bg-gradient-to-r from-cyan-400 to-cyan-500":t===1?"bg-gradient-to-r from-cyan-500 to-cyan-600":"bg-gradient-to-r from-cyan-600 to-cyan-700"}`,style:{width:`${a}%`}})}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsx("span",{className:"text-slate-400",children:"On: "}),e.jsx("span",{className:"text-green-400 font-semibold",children:i.onWarranty}),e.jsxs("span",{className:"text-slate-500",children:["(",c.toFixed(0),"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400"}),e.jsx("span",{className:"text-slate-400",children:"Out: "}),e.jsx("span",{className:"text-red-400 font-semibold",children:i.outOfWarranty})]})]})]},t)})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-700/50 flex-shrink-0",children:e.jsxs("div",{className:"text-xs text-slate-400",children:["ðŸ’¡ ",e.jsx("span",{className:"text-slate-300 font-semibold",children:((cs=R[0])==null?void 0:cs.name)||"Tidak ada data"})," mendominasi dengan ",r.length>0?((((ds=R[0])==null?void 0:ds.value)||0)/r.length*100).toFixed(1):0,"% dari total mesin"]})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>Z("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${d==="all"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Semua"}),e.jsx("button",{onClick:()=>Z("region"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${d==="region"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Region"}),e.jsx("button",{onClick:()=>Z("area_group"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${d==="area_group"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Area Group"}),e.jsx("button",{onClick:()=>Z("warranty"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${d==="warranty"?"bg-blue-500 text-white shadow-lg shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Status Garansi"}),e.jsx("button",{onClick:()=>Z("maintenance"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${d==="maintenance"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Maintenance"}),e.jsx("button",{onClick:()=>Z("customer"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${d==="customer"?"bg-blue-500 text-white shadow-lg shadow-blue-500/30":"bg-slate-800 text-slate-300 hover:bg-slate-700 border border-slate-700"}`,children:"Customer"})]}),d!=="all"&&e.jsxs("select",{value:V,onChange:s=>ct(s.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:border-blue-500 min-w-[200px]",children:[e.jsxs("option",{value:"",children:["Semua ",d==="region"?"Region":d==="area_group"?"Area Group":d==="warranty"?"Status":d==="maintenance"?"Maintenance":"Customer"]}),d==="region"&&[...new Set(m.map(s=>s.region).filter(Boolean))].sort().map(s=>e.jsx("option",{value:s,children:s},s)),d==="area_group"&&[...new Set(m.map(s=>s.area_group).filter(Boolean))].sort().map(s=>e.jsx("option",{value:s,children:s},s)),d==="warranty"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"On Warranty",children:"On Warranty"}),e.jsx("option",{value:"Out Of Warranty",children:"Out Of Warranty"})]}),d==="maintenance"&&[...new Set(m.map(s=>s.maintenance_status).filter(Boolean))].sort().map(s=>e.jsx("option",{value:s,children:s},s)),d==="customer"&&[...new Set(m.map(s=>s.customer).filter(Boolean))].sort().map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Data Mesin"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:[r.length," dari ",m.length," mesin"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{ie("create");const s=ee();b(s),se(!0)},className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5",children:[e.jsx("span",{className:"text-sm",children:"+"})," Tambah Mesin"]}),e.jsxs("button",{onClick:dt,className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5",children:[e.jsx(jt,{size:14})," Export CSV"]}),e.jsxs("label",{className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5 cursor-pointer",children:[e.jsx(ft,{size:14})," ",_e?"Uploading...":"Upload CSV",e.jsx("input",{type:"file",accept:".csv",onChange:xt,className:"hidden",disabled:_e})]}),e.jsx("button",{onClick:()=>ue(!Q),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1.5",title:Q?"Exit Fullscreen":"Fullscreen",children:Q?e.jsx(Nt,{size:14}):e.jsx(yt,{size:14})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(vt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Cari mesin berdasarkan branch, WSID, customer...",value:k,onChange:ot,className:"w-full pl-9 pr-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-slate-100 text-sm placeholder-slate-500 focus:outline-none focus:border-blue-500 transition-colors"})]})]}),e.jsx("div",{className:"overflow-auto max-h-[600px]",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-center sticky left-0 bg-slate-900 z-10 w-12",children:e.jsx("input",{type:"checkbox",checked:L.length===ve.length&&ve.length>0,onChange:rt,className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-slate-800"})}),e.jsx("th",{className:"px-3 py-2 text-left text-xs text-slate-300 whitespace-nowrap w-32",children:"WSID"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs text-slate-300 whitespace-nowrap w-48",children:"Branch"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs text-slate-300 whitespace-nowrap w-40",children:"Customer"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs text-slate-300 whitespace-nowrap w-32",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs text-slate-300 whitespace-nowrap w-32",children:"City"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs text-slate-300 whitespace-nowrap w-32",children:"Region"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs text-slate-300 whitespace-nowrap w-32",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-center text-xs text-slate-300 sticky right-0 bg-slate-900 z-10 w-24",children:"Actions"})]})}),e.jsx("tbody",{children:ve.map((s,t)=>e.jsxs("tr",{className:"border-t border-slate-700 hover:bg-slate-750",children:[e.jsx("td",{className:"px-3 py-2 text-center sticky left-0 bg-slate-800 z-10",children:e.jsx("input",{type:"checkbox",checked:L.includes(s.wsid),onChange:()=>nt(s.wsid),className:"w-4 h-4 rounded border-slate-600 bg-slate-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-slate-800"})}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-100 font-mono truncate",title:s.wsid||"",children:s.wsid||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-300 truncate",title:s.branch_name||"",children:s.branch_name||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-300 truncate",title:s.customer||"",children:s.customer||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-300 truncate",title:s.machine_type||"",children:s.machine_type||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm text-slate-300 truncate",title:s.city||"",children:s.city||"-"}),e.jsx("td",{className:"px-3 py-2 text-sm",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-blue-500/20 text-blue-400 whitespace-nowrap",children:s.region||"-"})}),e.jsx("td",{className:"px-3 py-2 text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded whitespace-nowrap ${s.machine_status==="On Warranty"||s.machine_status==="In Warranty"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:s.machine_status||"-"})}),e.jsx("td",{className:"px-3 py-2 sticky right-0 bg-slate-800 z-10",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>tt(s),className:"p-1.5 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded transition-colors",title:"Edit",children:e.jsx(Bs,{size:14})}),e.jsx("button",{onClick:()=>at(s),className:"p-1.5 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Delete",children:e.jsx(Rs,{size:14})})]})})]},t))})]})})})]}),ye>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-slate-800 border border-slate-700 rounded-lg",children:[e.jsxs("div",{className:"text-sm text-slate-400",children:["Menampilkan ",(E-1)*H+1," - ",Math.min(E*H,r.length)," dari ",r.length," mesin"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Pe(E-1),disabled:E===1,className:"p-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(wt,{size:16,className:"text-slate-300"})}),e.jsxs("span",{className:"text-sm text-slate-300",children:["Halaman ",E," dari ",ye]}),e.jsx("button",{onClick:()=>Pe(E+1),disabled:E===ye,className:"p-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(kt,{size:16,className:"text-slate-300"})})]})]}),Ie&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-slate-700 shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 px-6 py-5 flex justify-between items-center shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:K==="create"?e.jsx(Se,{className:"text-blue-400",size:20}):e.jsx(Bs,{className:"text-blue-400",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100",children:K==="create"?"Tambah Mesin Baru":"Edit Mesin"}),e.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:K==="create"?"Isi form di bawah untuk menambahkan mesin baru":"Perbarui informasi mesin"})]})]}),e.jsx("button",{onClick:()=>{se(!1),be()},className:"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50 p-2 rounded-lg transition-all",title:"Tutup",children:e.jsx(le,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-8 max-h-[calc(90vh-180px)] overflow-y-auto custom-scrollbar",children:[D.basic.length>0&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-700/50",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:e.jsx(Se,{className:"text-blue-400",size:18})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Informasi Dasar"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:D.basic.map(s=>{const t=g[s]||"",a=s.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),i=s==="wsid"||s==="branch_name",c=s!=="branch_name"&&M[s]&&M[s].length>0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[J(s),e.jsxs("span",{children:[a," ",i&&e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]})]}),c?e.jsxs("select",{value:t,onChange:l=>b({...g,[s]:l.target.value}),disabled:K==="edit"&&s==="wsid",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:bg-slate-700/80 hover:border-slate-500",children:[e.jsxs("option",{value:"",className:"bg-slate-800",children:["-- Pilih ",a," --"]}),M[s].map((l,n)=>e.jsx("option",{value:l,className:"bg-slate-800",children:l},n))]}):e.jsx("input",{type:"text",value:t,onChange:l=>b({...g,[s]:l.target.value}),disabled:K==="edit"&&s==="wsid",className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all hover:bg-slate-700/80 hover:border-slate-500",placeholder:te(s)})]},s)})})]}),D.location.length>0&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-700/50",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:e.jsx($s,{className:"text-orange-400",size:18})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Informasi Lokasi"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:D.location.map(s=>{const t=g[s]||"",a=s.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),i=M[s]&&M[s].length>0,c=s!=="address"&&g.address&&(s==="city"||s==="provinsi"||s==="area_group");return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[J(s),e.jsx("span",{children:a}),c&&e.jsx("span",{className:"text-xs text-cyan-400 font-normal",children:"(Auto-filled)"})]}),i?e.jsxs("select",{value:t,onChange:l=>{s==="zona"?st(l.target.value):b({...g,[s]:l.target.value})},readOnly:c,className:`w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all hover:bg-slate-700/80 hover:border-slate-500 ${c?"opacity-75 cursor-not-allowed":""}`,children:[e.jsxs("option",{value:"",className:"bg-slate-800",children:["-- Pilih ",a," --"]}),M[s].map((l,n)=>e.jsx("option",{value:l,className:"bg-slate-800",children:l},n))]}):e.jsx("input",{type:"text",value:t,onChange:l=>{s==="address"?et(l.target.value):b({...g,[s]:l.target.value})},className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all hover:bg-slate-700/80 hover:border-slate-500",placeholder:te(s)})]},s)})})]}),D.status.length>0&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-700/50",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-yellow-500/20 flex items-center justify-center",children:e.jsx(Es,{className:"text-yellow-400",size:18})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Status & Garansi"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:D.status.map(s=>{const t=g[s]||"",a=s.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),i=je(s),c=M[s]&&M[s].length>0;return s==="machine_status"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[J(s),e.jsx("span",{children:a})]}),e.jsxs("select",{value:t,onChange:l=>b({...g,[s]:l.target.value}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 transition-all hover:bg-slate-700/80 hover:border-slate-500",children:[e.jsx("option",{value:"",className:"bg-slate-800",children:"Pilih Status Garansi"}),e.jsx("option",{value:"On Warranty",className:"bg-slate-800",children:"On Warranty"}),e.jsx("option",{value:"In Warranty",className:"bg-slate-800",children:"In Warranty"}),e.jsx("option",{value:"Out Of Warranty",className:"bg-slate-800",children:"Out Of Warranty"})]})]},s):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[J(s),e.jsx("span",{children:a})]}),i?e.jsx("input",{type:"date",value:fe(t),onChange:l=>b({...g,[s]:Ne(l.target.value)}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 transition-all hover:bg-slate-700/80 hover:border-slate-500"}):c?e.jsxs("select",{value:t,onChange:l=>b({...g,[s]:l.target.value}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 transition-all hover:bg-slate-700/80 hover:border-slate-500",children:[e.jsxs("option",{value:"",className:"bg-slate-800",children:["-- Pilih ",a," --"]}),M[s].map((l,n)=>e.jsx("option",{value:l,className:"bg-slate-800",children:l},n))]}):e.jsx("input",{type:"text",value:t,onChange:l=>b({...g,[s]:l.target.value}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 transition-all hover:bg-slate-700/80 hover:border-slate-500",placeholder:te(s)})]},s)})})]}),D.technical.length>0&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-700/50",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-pink-500/20 flex items-center justify-center",children:e.jsx(Ls,{className:"text-pink-400",size:18})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Informasi Teknis"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:D.technical.map(s=>{const t=g[s]||"",a=s.split("_").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "),i=je(s),c=M[s]&&M[s].length>0,l=g.zona&&(s==="distance"||s==="response_time"||s==="resolution_time"),n=s!=="distance"&&g.distance&&!g.zona&&(s==="response_time"||s==="resolution_time"),u=l||n;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[J(s),e.jsx("span",{children:a}),u&&e.jsx("span",{className:"text-xs text-cyan-400 font-normal",children:"(Auto-filled)"})]}),i?e.jsx("input",{type:"date",value:fe(t),onChange:h=>b({...g,[s]:Ne(h.target.value)}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500 transition-all hover:bg-slate-700/80 hover:border-slate-500"}):c?e.jsxs("select",{value:t,onChange:h=>{s==="distance"?Be(h.target.value):b({...g,[s]:h.target.value})},readOnly:u,className:`w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500 transition-all hover:bg-slate-700/80 hover:border-slate-500 ${u?"opacity-75 cursor-not-allowed":""}`,children:[e.jsxs("option",{value:"",className:"bg-slate-800",children:["-- Pilih ",a," --"]}),M[s].map((h,F)=>e.jsx("option",{value:h,className:"bg-slate-800",children:h},F))]}):e.jsx("input",{type:"text",value:t,onChange:h=>{s==="distance"?Be(h.target.value):b({...g,[s]:h.target.value})},readOnly:u,className:`w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:border-pink-500 transition-all hover:bg-slate-700/80 hover:border-slate-500 ${u?"opacity-75 cursor-not-allowed":""}`,placeholder:te(s)})]},s)})})]}),D.other.length>0&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 pb-3 border-b border-slate-700/50",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-500/20 flex items-center justify-center",children:e.jsx(Us,{className:"text-slate-400",size:18})}),e.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Informasi Lainnya"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:D.other.map(s=>{const t=g[s]||"",a=s.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),i=je(s),c=M[s]&&M[s].length>0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-300",children:[J(s),e.jsx("span",{children:a})]}),i?e.jsx("input",{type:"date",value:fe(t),onChange:l=>b({...g,[s]:Ne(l.target.value)}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all hover:bg-slate-700/80 hover:border-slate-500"}):c?e.jsxs("select",{value:t,onChange:l=>b({...g,[s]:l.target.value}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all hover:bg-slate-700/80 hover:border-slate-500",children:[e.jsxs("option",{value:"",className:"bg-slate-800",children:["-- Pilih ",a," --"]}),M[s].map((l,n)=>e.jsx("option",{value:l,className:"bg-slate-800",children:l},n))]}):e.jsx("input",{type:"text",value:t,onChange:l=>b({...g,[s]:l.target.value}),className:"w-full px-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all hover:bg-slate-700/80 hover:border-slate-500",placeholder:te(s)})]},s)})})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gradient-to-r from-slate-800 to-slate-700 border-t border-slate-600 px-6 py-5 flex justify-end gap-3 shadow-lg",children:[e.jsx("button",{onClick:()=>{se(!1),be()},className:"px-6 py-3 bg-slate-700/80 hover:bg-slate-600 text-slate-100 rounded-xl transition-all font-medium shadow-lg hover:shadow-xl hover:scale-105",children:"Batal"}),e.jsx("button",{onClick:lt,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white rounded-xl transition-all font-medium shadow-lg hover:shadow-xl hover:scale-105 flex items-center gap-2",children:K==="create"?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"+"})," Tambah Mesin"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"âœ“"})," Simpan Perubahan"]})})]})]})}),Ks&&x&&x.expiringSoonMachines&&Array.isArray(x.expiringSoonMachines)&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",style:{zIndex:9999},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-5xl max-h-[90vh] flex flex-col border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"})," Top 5 Mesin yang Expiring Soon"]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Menampilkan 5 dari ",x.expiringSoonMachines.length," mesin dengan status critical"]})]}),e.jsx("button",{onClick:()=>Ae(!1),className:"text-slate-400 hover:text-white transition-colors p-2 rounded hover:bg-slate-800",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"#"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"WSID"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Nama Mesin"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Area"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Region"}),e.jsx("th",{className:"text-right py-3 px-4 text-slate-400 font-semibold",children:"Sisa Hari"}),e.jsx("th",{className:"text-center py-3 px-4 text-slate-400 font-semibold",children:"Status"})]})}),e.jsx("tbody",{children:x.expiringSoonMachines.slice(0,5).map((s,t)=>e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-800/50 transition-colors",children:[e.jsxs("td",{className:"py-3 px-4 text-slate-300 font-bold text-red-400",children:["#",t+1]}),e.jsx("td",{className:"py-3 px-4 text-slate-200 font-mono text-sm",children:s.wsid}),e.jsx("td",{className:"py-3 px-4 text-slate-200 font-semibold",children:s.branch_name||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-slate-300",children:s.area_group||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-slate-300",children:s.customer||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-slate-300",children:s.region||"Unknown"}),e.jsxs("td",{className:"py-3 px-4 text-right",children:[e.jsx("div",{className:`font-bold text-lg ${s.warrantyInfo.days<=30?"text-red-400":s.warrantyInfo.days<=60?"text-orange-400":"text-yellow-400"}`,children:s.warrantyInfo.days}),e.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:s.warrantyInfo.months>0?`${s.warrantyInfo.months} bulan`:"< 1 bulan"})]}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-red-500/20 text-red-400 font-semibold",children:"Critical"})})]},t))})]})})})]})}),Gs&&x&&x.totalOnWarranty!==void 0&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",style:{zIndex:9999},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"})," Insight Detail Warranty"]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Analisis lengkap status warranty ",x.totalOnWarranty," mesin"]})]}),e.jsx("button",{onClick:()=>Oe(!1),className:"text-slate-400 hover:text-white transition-colors p-2 rounded hover:bg-slate-800",children:e.jsx(le,{size:24})})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total On Warranty"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:x.totalOnWarranty})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Rata-rata Sisa"}),e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:((xs=x.avgRemaining)==null?void 0:xs.avgMonths)>0?`${x.avgRemaining.avgMonths} bulan`:`${((hs=x.avgRemaining)==null?void 0:hs.avgDays)||0} hari`})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-red-500/30",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:x.expiringSoonMachines.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"< 90 hari"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-yellow-500/30",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Warning"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:x.distribution.warning||0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"90-180 hari"})]})]}),Le.length>0&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Distribusi Sisa Waktu Warranty"}),e.jsx(oe,{width:"100%",height:250,children:e.jsxs(ce,{data:Le,children:[e.jsx(de,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:11}}),e.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #10b981",borderRadius:"8px"},labelStyle:{color:"#e2e8f0"}}),e.jsx(he,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-red-400 font-semibold",children:"Critical"}),e.jsx("span",{className:"text-2xl font-bold text-red-400",children:x.distribution.critical||0})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Mesin dengan sisa < 90 hari"}),e.jsx("div",{className:"mt-2 w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500",style:{width:`${x.totalOnWarranty>0?x.distribution.critical/x.totalOnWarranty*100:0}%`}})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-yellow-400 font-semibold",children:"Warning"}),e.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:x.distribution.warning||0})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Mesin dengan sisa 90-180 hari"}),e.jsx("div",{className:"mt-2 w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500",style:{width:`${x.totalOnWarranty>0?x.distribution.warning/x.totalOnWarranty*100:0}%`}})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-green-400 font-semibold",children:"Good"}),e.jsx("span",{className:"text-2xl font-bold text-green-400",children:x.distribution.good||0})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Mesin dengan sisa > 180 hari"}),e.jsx("div",{className:"mt-2 w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${x.totalOnWarranty>0?x.distribution.good/x.totalOnWarranty*100:0}%`}})})]})]}),x.expiringSoonMachines.length>0&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"})," Mesin yang Expiring Soon (Top 10)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left p-2 text-slate-400",children:"WSID"}),e.jsx("th",{className:"text-left p-2 text-slate-400",children:"Branch"}),e.jsx("th",{className:"text-left p-2 text-slate-400",children:"Customer"}),e.jsx("th",{className:"text-left p-2 text-slate-400",children:"Area"}),e.jsx("th",{className:"text-right p-2 text-slate-400",children:"Sisa Hari"}),e.jsx("th",{className:"text-right p-2 text-slate-400",children:"Status"})]})}),e.jsx("tbody",{children:x.expiringSoonMachines.map((s,t)=>e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[e.jsx("td",{className:"p-2 text-slate-200 font-mono text-xs",children:s.wsid}),e.jsx("td",{className:"p-2 text-slate-300",children:s.branch_name}),e.jsx("td",{className:"p-2 text-slate-300",children:s.customer}),e.jsx("td",{className:"p-2 text-slate-300",children:s.area_group}),e.jsx("td",{className:"p-2 text-right",children:e.jsxs("span",{className:"text-red-400 font-semibold",children:[s.warrantyInfo.days," hari"]})}),e.jsx("td",{className:"p-2 text-right",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-red-500/20 text-red-400",children:"Critical"})})]},t))})]})})]})]})]})}),Ys&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",style:{zIndex:9999},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"âš™ï¸"})," Insight Detail Tipe Mesin"]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Analisis lengkap distribusi ",W.length," tipe mesin"]})]}),e.jsx("button",{onClick:()=>Te(!1),className:"text-slate-400 hover:text-white transition-colors p-2 rounded hover:bg-slate-800",children:e.jsx(le,{size:24})})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total Tipe Mesin"}),e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:W.length})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Tipe Terpopuler"}),e.jsx("p",{className:"text-lg font-bold text-purple-400 truncate",title:(ms=W[0])==null?void 0:ms[0],children:((us=W[0])==null?void 0:us[0])||"N/A"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[((ps=W[0])==null?void 0:ps[1])||0," unit"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-purple-500/30",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Dominasi Terbesar"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:[r.length>0?((((gs=W[0])==null?void 0:gs[1])||0)/r.length*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:((bs=W[0])==null?void 0:bs[0])||"N/A"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total Mesin"}),e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:r.length})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Distribusi Tipe Mesin (Top 10)"}),e.jsx(oe,{width:"100%",height:300,children:e.jsxs(ce,{data:Xs,children:[e.jsx(de,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:10},angle:-45,textAnchor:"end",height:80}),e.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #a855f7",borderRadius:"8px"},labelStyle:{color:"#e2e8f0"}}),e.jsx(he,{dataKey:"value",fill:"#a855f7",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"})," Detail Semua Tipe Mesin"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left p-3 text-slate-400",children:"#"}),e.jsx("th",{className:"text-left p-3 text-slate-400",children:"Tipe Mesin"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Jumlah"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Persentase"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"On Warranty"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Out Warranty"}),e.jsx("th",{className:"text-center p-3 text-slate-400",children:"Warranty %"})]})}),e.jsx("tbody",{children:W.map(([s,t],a)=>{const i=r.length>0?t/r.length*100:0,c=r.filter(n=>(n.machine_type||"Unknown")===s).reduce((n,u)=>(u.machine_status==="On Warranty"||u.machine_status==="In Warranty"?n.onWarranty++:n.outOfWarranty++,n),{onWarranty:0,outOfWarranty:0}),l=t>0?c.onWarranty/t*100:0;return e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[e.jsx("td",{className:"p-3 text-slate-300 font-bold",children:a<3?e.jsxs("span",{className:`
                                  ${a===0?"text-yellow-400":a===1?"text-gray-400":"text-orange-400"}
                                `,children:["#",a+1]}):e.jsxs("span",{className:"text-slate-500",children:["#",a+1]})}),e.jsx("td",{className:"p-3 text-slate-200 font-semibold",children:s}),e.jsx("td",{className:"p-3 text-right text-slate-200 font-bold",children:t}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"text-purple-400 font-semibold",children:[i.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"text-green-400 font-semibold",children:c.onWarranty})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"text-red-400 font-semibold",children:c.outOfWarranty})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-[100px] h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-xs text-slate-400 w-12 text-right",children:[l.toFixed(0),"%"]})]})})]},a)})})]})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’¡"})," Key Insights"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:[e.jsx("span",{className:"font-semibold text-white",children:(js=W[0])==null?void 0:js[0]})," adalah tipe mesin paling populer dengan ",e.jsxs("span",{className:"font-semibold text-purple-400",children:[(fs=W[0])==null?void 0:fs[1]," unit"]})," (",r.length>0?((((Ns=W[0])==null?void 0:Ns[1])||0)/r.length*100).toFixed(1):0,"% dari total)"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:["Terdapat ",e.jsxs("span",{className:"font-semibold text-white",children:[W.length," tipe mesin"]})," berbeda yang digunakan"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:["Top 3 tipe mesin (",W.slice(0,3).map(([s])=>s).join(", "),") mencakup ",e.jsxs("span",{className:"font-semibold text-purple-400",children:[(W.slice(0,3).reduce((s,[,t])=>s+t,0)/r.length*100).toFixed(1),"%"]})," dari total mesin"]})]})]})]})]})]})}),Vs&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",style:{zIndex:9999},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ—ºï¸"})," Insight Detail Area Group"]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Analisis lengkap distribusi ",C.length," area group"]})]}),e.jsx("button",{onClick:()=>De(!1),className:"text-slate-400 hover:text-white transition-colors p-2 rounded hover:bg-slate-800",children:e.jsx(le,{size:24})})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total Area Group"}),e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:C.length})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Area Group Terpopuler"}),e.jsx("p",{className:"text-lg font-bold text-purple-400 truncate",title:(ys=C[0])==null?void 0:ys[0],children:((vs=C[0])==null?void 0:vs[0])||"N/A"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[((ws=C[0])==null?void 0:ws[1])||0," unit"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-purple-500/30",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Dominasi Terbesar"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:[r.length>0?((((ks=C[0])==null?void 0:ks[1])||0)/r.length*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:((Cs=C[0])==null?void 0:Cs[0])||"N/A"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total Mesin"}),e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:r.length})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Distribusi Area Group (Top 10)"}),e.jsx(oe,{width:"100%",height:300,children:e.jsxs(ce,{data:Zs,children:[e.jsx(de,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:10},angle:-45,textAnchor:"end",height:80}),e.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #a855f7",borderRadius:"8px"},labelStyle:{color:"#e2e8f0"}}),e.jsx(he,{dataKey:"value",fill:"#a855f7",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"})," Detail Semua Area Group"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left p-3 text-slate-400",children:"#"}),e.jsx("th",{className:"text-left p-3 text-slate-400",children:"Area Group"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Jumlah"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Persentase"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"On Warranty"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Out Warranty"}),e.jsx("th",{className:"text-center p-3 text-slate-400",children:"Warranty %"})]})}),e.jsx("tbody",{children:C.map(([s,t],a)=>{const i=r.length>0?t/r.length*100:0,c=r.filter(n=>{let h=(n.area_group||"Unknown").trim().toUpperCase();return h=h.replace(/\s+\d+$/,""),h==="SURABAYA KOTA"&&(h="SURABAYA"),h===s}).reduce((n,u)=>(u.machine_status==="On Warranty"||u.machine_status==="In Warranty"?n.onWarranty++:n.outOfWarranty++,n),{onWarranty:0,outOfWarranty:0}),l=t>0?c.onWarranty/t*100:0;return e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[e.jsx("td",{className:"p-3 text-slate-300 font-bold",children:a<3?e.jsxs("span",{className:`
                                  ${a===0?"text-yellow-400":a===1?"text-gray-400":"text-orange-400"}
                                `,children:["#",a+1]}):e.jsxs("span",{className:"text-slate-500",children:["#",a+1]})}),e.jsx("td",{className:"p-3 text-slate-200 font-semibold",children:s}),e.jsx("td",{className:"p-3 text-right text-slate-200 font-bold",children:t}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"text-purple-400 font-semibold",children:[i.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"text-green-400 font-semibold",children:c.onWarranty})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"text-red-400 font-semibold",children:c.outOfWarranty})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-[100px] h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-xs text-slate-400 w-12 text-right",children:[l.toFixed(0),"%"]})]})})]},a)})})]})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’¡"})," Key Insights"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:[e.jsx("span",{className:"font-semibold text-white",children:(Ss=C[0])==null?void 0:Ss[0]})," adalah area group paling populer dengan ",e.jsxs("span",{className:"font-semibold text-purple-400",children:[(Ws=C[0])==null?void 0:Ws[1]," unit"]})," (",r.length>0?((((_s=C[0])==null?void 0:_s[1])||0)/r.length*100).toFixed(1):0,"% dari total)"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:["Terdapat ",e.jsxs("span",{className:"font-semibold text-white",children:[C.length," area group"]})," berbeda yang digunakan"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:["Top 3 area group (",C.slice(0,3).map(([s])=>s).join(", "),") mencakup ",e.jsxs("span",{className:"font-semibold text-purple-400",children:[(C.slice(0,3).reduce((s,[,t])=>s+t,0)/r.length*100).toFixed(1),"%"]})," dari total mesin"]})]})]})]})]})]})}),Hs&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",style:{zIndex:9999},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‘‘"})," Insight Detail Customer"]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Analisis lengkap distribusi ",S.length," customer"]})]}),e.jsx("button",{onClick:()=>ze(!1),className:"text-slate-400 hover:text-white transition-colors p-2 rounded hover:bg-slate-800",children:e.jsx(le,{size:24})})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total Customer"}),e.jsx("p",{className:"text-2xl font-bold text-cyan-400",children:S.length})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Customer Terbesar"}),e.jsx("p",{className:"text-lg font-bold text-cyan-400 truncate",title:(Ms=S[0])==null?void 0:Ms[0],children:((Os=S[0])==null?void 0:Os[0])||"N/A"}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[((As=S[0])==null?void 0:As[1])||0," unit"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-cyan-500/30",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Dominasi Terbesar"}),e.jsxs("p",{className:"text-2xl font-bold text-cyan-400",children:[r.length>0?((((Ts=S[0])==null?void 0:Ts[1])||0)/r.length*100).toFixed(1):0,"%"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:((Ds=S[0])==null?void 0:Ds[0])||"N/A"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total Mesin"}),e.jsx("p",{className:"text-2xl font-bold text-cyan-400",children:r.length})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Distribusi Customer (Top 10)"}),e.jsx(oe,{width:"100%",height:300,children:e.jsxs(ce,{data:Qs,children:[e.jsx(de,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:10},angle:-45,textAnchor:"end",height:80}),e.jsx(xe,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #06b6d4",borderRadius:"8px"},labelStyle:{color:"#e2e8f0"}}),e.jsx(he,{dataKey:"value",fill:"#06b6d4",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“‹"})," Detail Semua Customer"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left p-3 text-slate-400",children:"#"}),e.jsx("th",{className:"text-left p-3 text-slate-400",children:"Customer"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Jumlah"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Persentase"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"On Warranty"}),e.jsx("th",{className:"text-right p-3 text-slate-400",children:"Out Warranty"}),e.jsx("th",{className:"text-center p-3 text-slate-400",children:"Warranty %"})]})}),e.jsx("tbody",{children:S.map(([s,t],a)=>{const i=r.length>0?t/r.length*100:0,c=r.filter(n=>(n.customer||"Unknown")===s).reduce((n,u)=>(u.machine_status==="On Warranty"||u.machine_status==="In Warranty"?n.onWarranty++:n.outOfWarranty++,n),{onWarranty:0,outOfWarranty:0}),l=t>0?c.onWarranty/t*100:0;return e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[e.jsx("td",{className:"p-3 text-slate-300 font-bold",children:a<3?e.jsxs("span",{className:`
                                  ${a===0?"text-yellow-400":a===1?"text-gray-400":"text-orange-400"}
                                `,children:["#",a+1]}):e.jsxs("span",{className:"text-slate-500",children:["#",a+1]})}),e.jsx("td",{className:"p-3 text-slate-200 font-semibold",children:s}),e.jsx("td",{className:"p-3 text-right text-slate-200 font-bold",children:t}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("span",{className:"text-cyan-400 font-semibold",children:[i.toFixed(1),"%"]})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"text-green-400 font-semibold",children:c.onWarranty})}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("span",{className:"text-red-400 font-semibold",children:c.outOfWarranty})}),e.jsx("td",{className:"p-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"flex-1 max-w-[100px] h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${l}%`}})}),e.jsxs("span",{className:"text-xs text-slate-400 w-12 text-right",children:[l.toFixed(0),"%"]})]})})]},a)})})]})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ’¡"})," Key Insights"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-cyan-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:[e.jsx("span",{className:"font-semibold text-white",children:(zs=S[0])==null?void 0:zs[0]})," adalah customer terbesar dengan ",e.jsxs("span",{className:"font-semibold text-cyan-400",children:[(Is=S[0])==null?void 0:Is[1]," unit"]})," (",r.length>0?((((Fs=S[0])==null?void 0:Fs[1])||0)/r.length*100).toFixed(1):0,"% dari total)"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-cyan-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:["Terdapat ",e.jsxs("span",{className:"font-semibold text-white",children:[S.length," customer"]})," yang menggunakan mesin"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-cyan-400 font-bold",children:"â€¢"}),e.jsxs("p",{className:"text-slate-300",children:["Top 3 customer (",S.slice(0,3).map(([s])=>s).join(", "),") mencakup ",e.jsxs("span",{className:"font-semibold text-cyan-400",children:[(S.slice(0,3).reduce((s,[,t])=>s+t,0)/r.length*100).toFixed(1),"%"]})," dari total mesin"]})]})]})]})]})]})}),e.jsx(At,{isOpen:z.alertState.isOpen,onClose:z.closeAlert,type:z.alertState.type,title:z.alertState.title,message:z.alertState.message,duration:z.alertState.duration}),e.jsx(_t,{isOpen:I.confirmState.isOpen,onClose:I.closeConfirm,onConfirm:I.handleConfirm,title:I.confirmState.title,message:I.confirmState.message,confirmText:I.confirmState.confirmText,cancelText:I.confirmState.cancelText,type:I.confirmState.type,confirmButtonColor:I.confirmState.confirmButtonColor}),y&&e.jsx(Tt,{size:"md",message:"Memproses..."})]})}export{Ht as default};
