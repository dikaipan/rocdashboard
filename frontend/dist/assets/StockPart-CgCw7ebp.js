const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StockPartDetailModal-C6AZ6oeU.js","assets/vendor-react-C0jbZujj.js","assets/vendor-maps-C_U1R0uQ.js","assets/vendor-maps-Dgihpmma.css","assets/StockPartCRUDModal-Db_JZVVp.js","assets/InlineLoadingSpinner-C9ma32qp.js","assets/index-BT-vs0to.js","assets/index-13y3N1YK.css","assets/StockPartKPIModals-DB91vsab.js","assets/StockPartAlertDetailModal-D-LO9hWB.js"])))=>i.map(i=>d[i]);
import{u as ct,L as dt,c as f,T as y,B as _e,A as ee,a as Re,g as Me,_ as me}from"./index-BT-vs0to.js";import{r as x,j as e,a5 as Ae,o as Oe,p as pt,t as mt,q as Ue,s as ut,X as Be,a6 as xt,a7 as ht,v as ft,z as ze,a8 as gt,a0 as ce,Q as bt,O as jt,K as yt,a4 as Nt,$ as vt,R as te,P as Fe,H as wt,a9 as St}from"./vendor-react-C0jbZujj.js";import{b as Ct,c as kt}from"./useEngineerData-B64tYS1F.js";import{u as _t,a as At,C as Pt}from"./CustomConfirm-CneD7qTP.js";import{u as Tt}from"./useStockPartKPIs-BXbBZ10Y.js";import{u as Lt,C as Et,I as $t}from"./InlineLoadingSpinner-C9ma32qp.js";import{P as It}from"./PageLayout-CILpPulD.js";import"./vendor-maps-C_U1R0uQ.js";function Rt(i,N,{searchQuery:B,sortBy:v,sortValue:$}){const I=x.useMemo(()=>v==="all"||!$?i:i.filter(g=>(g.part_number||g["part number"]||"").toLowerCase()==="region"?!1:Object.keys(g).filter(A=>A.toLowerCase().includes("idfsl")||A.toLowerCase().includes("idccw")).some(A=>v==="city"?A.toLowerCase().includes($.toLowerCase().substring(0,5))&&parseInt(g[A]||0)>0:!1)),[i,v,$]),z=x.useMemo(()=>{if(!B)return N;const g=B.toLowerCase();return N.filter(w=>{const R=(w.part_number||w["part number"]||"").toLowerCase(),A=(w.part_name||w["part name"]||"").toLowerCase(),M=(w.type_of_part||w["type of part"]||"").toLowerCase();return R.includes(g)||A.includes(g)||M.includes(g)})},[N,B]);return{filteredStockParts:I,filteredParts:z}}function Mt({create:i,update:N,remove:B,setModalMode:v,setFormData:$,setShowModal:I,resetForm:z}){const g=Lt(),w=_t(),R=x.useCallback(()=>{v("create"),z(),I(!0)},[v,z,I]),A=x.useCallback((d,E=null)=>{v("edit");const b={};Object.keys(d).forEach(P=>{(P.toLowerCase().includes("idfsl")||P.toLowerCase().includes("idccw"))&&(b[P]=d[P]||0)}),$({part_number:d.part_number||d["part number"]||"",part_name:d.part_name||d["part name"]||"",type_of_part:d.type_of_part||d["type of part"]||"","20_top_usage":d["20_top_usage"]||d["20 top usage"]||"No",grand_total:d.grand_total||d["grand total"]||"0",...b}),I(!0)},[v,$,I]),M=x.useCallback(async d=>{const E=d.part_number||d["part number"],b=d.part_name||d["part name"];w.showConfirm(`Part Number: ${E}
Part Name: ${b}

Data ini akan dihapus secara permanen!`,async()=>{try{await B(E),g.success(`Part ${E} berhasil dihapus!`),window.dispatchEvent(new Event("stockPartDataChanged"))}catch(P){console.error("Error deleting part:",P),g.error(`Gagal menghapus part: ${P.message}`)}},{title:"Hapus Part?",type:"danger",confirmText:"Hapus",cancelText:"Batal"})},[B,g,w]),J=x.useCallback(async(d,E,b={},P=[])=>{if(!d.part_number||!d.part_name){g.warning("Part Number dan Part Name harus diisi!");return}if(E==="create"){const j=d.part_number.trim(),m=P.find(D=>{var T;return((T=D.part_number||D["part number"])==null?void 0:T.toString().trim())===j});if(m){const D=m.part_name||m["part name"]||"N/A";w.showConfirm(`Part yang sudah ada:
- Part Number: ${j}
- Part Name: ${D}

Apakah Anda ingin mengedit part yang sudah ada ini?`,()=>{v("edit");const T={};Object.keys(m).forEach(V=>{(V.toLowerCase().includes("idfsl")||V.toLowerCase().includes("idccw"))&&(T[V]=m[V]||0)}),$({part_number:m.part_number||m["part number"]||"",part_name:m.part_name||m["part name"]||"",type_of_part:m.type_of_part||m["type of part"]||"","20_top_usage":m["20_top_usage"]||m["20 top usage"]||"No",grand_total:m.grand_total||m["grand total"]||"0",...T})},{title:`Part Number "${j}" sudah ada!`,type:"warning",confirmText:"Edit Part",cancelText:"Batal"});return}}if(Object.keys(d).filter(j=>j.toLowerCase().includes("idfsl")||j.toLowerCase().includes("idccw")).some(j=>parseInt(d[j]||0)<0)){g.warning("Stock tidak boleh negatif! Silakan periksa kembali nilai stock.");return}const Y=E==="create"?"menambahkan":"mengupdate",Q=b.adjustmentMode&&b.adjustmentMode!=="set"?`
Mode: ${b.adjustmentMode==="add"?"Tambah Stock":"Kurangi Stock"}
Alasan: ${b.reason||"-"}`:"";w.showConfirm(`Part Number: ${d.part_number}
Part Name: ${d.part_name}
Type: ${d.type_of_part||"-"}
Grand Total: ${d.grand_total||0}${Q}

Data akan ${E==="create"?"ditambahkan":"diperbarui"} ke database.`,async()=>{try{if(E==="create")await i(d),g.success(`Part ${d.part_number} berhasil ditambahkan!`);else{await N(d.part_number,d);const j=b.adjustmentMode==="add"?"ditambahkan":b.adjustmentMode==="remove"?"dikurangi":"diperbarui";g.success(`Part ${d.part_number} berhasil ${j}!`)}I(!1),z(),window.dispatchEvent(new Event("stockPartDataChanged"))}catch(j){console.error("Error saving part:",j);let m="Terjadi kesalahan";j.message&&(j.message.includes("already exists")?m=`Part Number "${d.part_number}" sudah ada di database. Silakan gunakan Edit untuk mengubah part yang sudah ada.`:j.message.includes("not found")?m=`Part Number "${d.part_number}" tidak ditemukan.`:m=j.message),g.error(`Gagal ${Y} part:

${m}`)}},{title:`Konfirmasi ${Y==="menambahkan"?"Tambah":"Update"} Part`,type:"info",confirmText:"Simpan",cancelText:"Batal"})},[i,N,I,z,v,$,g,w]);return{handleAdd:R,handleEdit:A,handleDelete:M,handleSave:J,alert:g,confirm:w}}const Ot=te.lazy(()=>me(()=>import("./StockPartDetailModal-C6AZ6oeU.js"),__vite__mapDeps([0,1,2,3]))),Ut=te.lazy(()=>me(()=>import("./StockPartCRUDModal-Db_JZVVp.js"),__vite__mapDeps([4,1,2,3,5,6,7]))),Bt=te.lazy(()=>me(()=>import("./StockPartKPIModals-DB91vsab.js"),__vite__mapDeps([8,1,2,3,6,7]))),zt=te.lazy(()=>me(()=>import("./StockPartAlertDetailModal-D-LO9hWB.js"),__vite__mapDeps([9,1,2,3]))),Ft={"Region 1":"#ef4444","Region 2":"#3b82f6","Region 3":"#10b981"},de=i=>Ft[i]||"#94a3b8",Kt={Jakarta:[-6.2088,106.8456],Surabaya:[-7.2575,112.7521],Bandung:[-6.9175,107.6191],Medan:[3.5952,98.6722],Semarang:[-6.9667,110.4167],Makassar:[-5.1477,119.4327],Palembang:[-2.9761,104.7754],Tangerang:[-6.1783,106.6319],Bogor:[-6.5971,106.806],Yogyakarta:[-7.7956,110.3695],Malang:[-7.9797,112.6304],Denpasar:[-8.6705,115.2126],Balikpapan:[-1.2379,116.8529],Banjarmasin:[-3.3194,114.5906],Pekanbaru:[.5071,101.4478],Padang:[-.9471,100.4172],Manado:[1.4748,124.8421],Pontianak:[-.0263,109.3425],Batam:[1.0456,104.0305],Jambi:[-1.6101,103.6131],Cirebon:[-6.7063,108.5571],Mataram:[-8.5833,116.1167],Kupang:[-10.1718,123.6075],Jayapura:[-2.5916,140.6692],Ambon:[-3.6954,128.1814],Palu:[-.8999,119.8707],Purwokerto:[-7.4297,109.2344],Jember:[-8.1706,113.6997],"Bandar Lampung":[-5.4294,105.2628],Palangkaraya:[-2.2088,113.9213],Bengkulu:[-3.8004,102.2655],"Pematang Siantar":[2.9631,99.0618]},pe={Jakarta:"DKI JAKARTA",Surabaya:"JAWA TIMUR",Bandung:"JAWA BARAT",Medan:"SUMATERA UTARA",Semarang:"JAWA TENGAH",Makassar:"SULAWESI SELATAN",Palembang:"SUMATERA SELATAN",Tangerang:"BANTEN",Bogor:"JAWA BARAT",Yogyakarta:"DAERAH ISTIMEWA YOGYAKARTA",Malang:"JAWA TIMUR",Denpasar:"BALI",Balikpapan:"KALIMANTAN TIMUR",Banjarmasin:"KALIMANTAN SELATAN",Pekanbaru:"RIAU",Padang:"SUMATERA BARAT",Manado:"SULAWESI UTARA",Pontianak:"KALIMANTAN BARAT",Batam:"KEPULAUAN RIAU",Jambi:"JAMBI",Cirebon:"JAWA BARAT",Mataram:"NUSA TENGGARA BARAT",Kupang:"NUSA TENGGARA TIMUR",Jayapura:"PAPUA",Ambon:"MALUKU",Palu:"SULAWESI TENGAH",Purwokerto:"JAWA TENGAH",Jember:"JAWA TIMUR","Bandar Lampung":"LAMPUNG",Palangkaraya:"KALIMANTAN TENGAH",Bengkulu:"BENGKULU","Pematang Siantar":"SUMATERA UTARA"},Vt={region1:"#3b82f6",region2:"#10b981",region3:"#f59e0b",primary:"#06b6d4",secondary:"#8b5cf6"};function Zt(){const{isDark:i}=ct(),{rows:N,loading:B}=Ct(),{rows:v,loading:$}=kt();x.useEffect(()=>{},[v]);const{create:I,update:z,remove:g,loading:w}=At({endpoint:"/api/stock-parts",primaryKey:"part_number",eventName:"stockPartDataChanged"}),[R,A]=x.useState(null),[M,J]=x.useState(null),[d,E]=x.useState(""),[b,P]=x.useState(1),[K]=x.useState(10),[ue,Y]=x.useState(!1),[Q,j]=x.useState("all"),[m,D]=x.useState(""),[T,V]=x.useState(!1),[G,Pe]=x.useState(!1),[W,Te]=x.useState(!1),[Ke,xe]=x.useState(!1),[se,he]=x.useState(""),[Ve,Je]=x.useState(null),[H,De]=x.useState("create"),[Ge,q]=x.useState(null),[Le,ae]=x.useState({part_number:"",part_name:"",type_of_part:"","20_top_usage":"No",grand_total:"0"}),re=x.useMemo(()=>v.map(t=>{const s=t["FSL City"]||t.fsl_city||t.fslcity||"",n=Kt[s]||[-6.2088,106.8456];return{...t,latitude:n[0],longitude:n[1],fsl_city:s,fsl_name:t["FSL Name"]||t.fsl_name||t.fslname,fsl_id:t["FSL ID"]||t.fsl_id||t.fslid,region:t["Region "]||t.region||t["region "]}}),[v]),We=t=>{D(t),j(t?"city":"all")},F=x.useMemo(()=>N.filter(t=>(t.part_number||t["part number"]||"").toLowerCase()!=="region"),[N]),{filteredStockParts:ne,filteredParts:O}=Rt(N,F,{searchQuery:d,sortBy:Q,sortValue:m}),fe=x.useMemo(()=>{if(Q==="all"||!m)return[];const t={};return ne.forEach(s=>{Object.keys(s).filter(o=>o.toLowerCase().includes("idfsl")||o.toLowerCase().includes("idccw")).forEach(o=>{const u=parseInt(s[o]||0);if(u>0){const a=o.split(" - ")[1]||o.split(" - ")[0];a.toLowerCase().includes(m.toLowerCase().substring(0,5))&&(t[a]=(t[a]||0)+u)}})}),Object.entries(t).map(([s,n])=>({name:s.substring(0,15),value:n})).sort((s,n)=>n.value-s.value).slice(0,10)},[ne,Q,m]),He=Tt(F,ne,v),{stockAlerts:k,totalStockQuantity:ge,regionDistribution:Ee,topPartsByStock:be,totalFSL:$e,totalParts:le}=He,X=t=>{Je(t),Te(!0)},Ye=()=>{switch(Ve){case"critical":return{title:"CRITICAL - Out of Stock",entries:k.critical,color:"red"};case"urgent":return{title:"URGENT - Very Low Stock (1-5 units)",entries:k.urgent,color:"orange"};case"warning":return{title:"WARNING - Low Stock (6-10 units)",entries:k.warning,color:"yellow"};case"priority":return{title:"PRIORITY - Top 20 with Low Stock",entries:k.priorityCritical,color:"purple"};default:return{title:"",entries:[],color:"gray"}}},oe=Math.ceil(O.length/K),Qe=x.useMemo(()=>{const t=(b-1)*K;return O.slice(t,t+K)},[O,b,K]),Z=Mt({create:I,update:z,remove:g,setModalMode:De,setFormData:ae,setShowModal:V,resetForm:()=>{ae({part_number:"",part_name:"",type_of_part:"","20_top_usage":"No",grand_total:"0"}),q(null)}}),{alert:L,confirm:U}=Z,qe=()=>{q(null),Z.handleAdd()},Xe=()=>{he(""),xe(!0)},Ze=t=>{xe(!1),he(""),ie(t)},Ie=x.useMemo(()=>{if(!se)return F;const t=se.toLowerCase();return F.filter(s=>{const n=(s.part_number||s["part number"]||"").toLowerCase(),o=(s.part_name||s["part name"]||"").toLowerCase();return n.includes(t)||o.includes(t)})},[F,se]),et=t=>t.part_number||t["part number"]||"",tt=t=>{const s={};return Object.keys(t).forEach(n=>{(n.toLowerCase().includes("idfsl")||n.toLowerCase().includes("idccw"))&&(s[n]=0)}),{part_number:t.part_number||t["part number"]||"",part_name:t.part_name||t["part name"]||"",type_of_part:t.type_of_part||t["type of part"]||"","20_top_usage":t["20_top_usage"]||t["20 top usage"]||"No",grand_total:"0",...s}},st=t=>{const s=F.find(n=>et(n)===t);if(s){const n=tt(s);ae(n)}},at=async t=>{let s={...(t==null?void 0:t.formData)||t||Le};const n=(t==null?void 0:t.mode)||"set",o={reason:t==null?void 0:t.reason,notes:t==null?void 0:t.notes,adjustmentMode:n,timestamp:new Date().toISOString(),user:"current_user"},u=Object.keys(s).filter(a=>a.toLowerCase().includes("idfsl")||a.toLowerCase().includes("idccw"));if(H==="edit"&&n!=="set"){const a=N.find(l=>(l.part_number||l["part number"])===s.part_number);a&&u.forEach(l=>{const p=parseInt(s[l]||0),h=parseInt(a[l]||0);let c;n==="add"?c=h+p:n==="remove"?c=Math.max(0,h-p):c=p,s[l]=c})}if(s.grand_total=u.reduce((a,l)=>a+parseInt(s[l]||0),0),H==="edit"&&(t!=null&&t.reason)){const a=N.find(l=>(l.part_number||l["part number"])===s.part_number);if(a){const l={id:`${s.part_number}_${Date.now()}`,partNumber:s.part_number,partName:s.part_name,action:"stock_adjustment",mode:o.adjustmentMode,reason:o.reason,notes:o.notes,timestamp:o.timestamp,user:o.user,changes:{},grandTotalBefore:parseInt(a.grand_total||a["grand total"]||0),grandTotalAfter:s.grand_total};u.forEach(h=>{const c=parseInt(s[h]||0),S=parseInt(a[h]||0);c!==S&&(l.changes[h]={from:S,to:c,diff:c-S})});const p=JSON.parse(localStorage.getItem("stockPartHistory")||"[]");p.unshift(l),p.length>1e3&&p.pop(),localStorage.setItem("stockPartHistory",JSON.stringify(p)),fetch("/api/stock-history",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).catch(h=>console.warn("Backend save failed:",h))}}else H==="edit"&&N.find(a=>(a.part_number||a["part number"])===s.part_number);if(H==="edit"){const a=N.find(l=>(l.part_number||l["part number"])===s.part_number);a&&Object.keys(a).forEach(l=>{const p=l.toLowerCase().includes("idfsl")||l.toLowerCase().includes("idccw"),h=l==="grand_total"||l==="grand total",c=["part_number","part number","part_name","part name","type_of_part","type of part","20_top_usage","20 top usage"].includes(l);!p&&!h&&!c&&!(l in s)&&(s[l]=a[l])})}await Z.handleSave(s,H,o,N),q(null)},ie=(t,s=null)=>{q(s),Z.handleEdit(t,s)},rt=t=>{Z.handleDelete(t)},nt=()=>{if(!O||O.length===0){L.warning("No data to export");return}const t=Object.keys(O[0]),s=O.map(l=>{const p={};return t.forEach(h=>{h.toLowerCase()==="region"&&(l.part_number||l["part number"]||"").toLowerCase()==="region"||(p[h]=l[h]||"")}),p});if(s.length===0){L.warning("No data to export");return}const n=Object.keys(s[0]),o=[n.join(","),...s.map(l=>n.map(p=>`"${String(l[p]||"").replace(/"/g,'""')}"`).join(","))].join(`
`),u=new Blob([o],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(u),a.download=`stock_parts_${new Date().toISOString().split("T")[0]}.csv`,a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),L.success("Data berhasil diekspor!","Export Berhasil")},lt=async t=>{const s=t.target.files[0];if(s){if(!s.name.endsWith(".csv")){L.warning("Please upload a CSV file");return}Y(!0);try{const n=new FormData;n.append("file",s),n.append("target","stock-parts");const o=await fetch("/api/upload",{method:"POST",body:n});if(!o.ok){const u=await o.json();throw new Error(u.error||"Failed to upload CSV")}L.success("CSV uploaded successfully!","Upload Berhasil"),window.dispatchEvent(new Event("stockPartDataChanged")),t.target.value=""}catch(n){console.error("Error uploading CSV:",n),L.error(`Failed to upload CSV: ${n.message}`)}finally{Y(!1)}}},je=t=>{P(Math.max(1,Math.min(t,oe)))},ot=(B||$)&&N.length===0&&v.length===0,it=T||G||W||M||U.confirmState.isOpen;return ot&&!it?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(dt,{type:"spinner",message:"Memuat data stock part...",size:"lg"})}):e.jsxs(It,{title:"Stock Part Management",children:[R!=="fsl-map"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:f(Re("red",!0),"min-h-[280px] flex flex-col lg:col-span-2"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:y.kpiTitle,children:"Stock Alerts"}),e.jsx("h3",{className:y.kpiValue,children:k.totalLowStock}),e.jsx("p",{className:y.kpiSubtitle,children:"Parts require attention"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>J("stock-alerts"),className:_e.iconSmall,title:"Lihat Analisis Lengkap",children:e.jsx(Ae,{size:18})}),e.jsx("div",{className:"text-3xl",children:"ğŸš¨"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2 mt-2",children:[e.jsx("div",{onClick:()=>k.criticalCount>0&&X("critical"),className:f(ee.critical,"p-2.5 cursor-pointer hover:scale-[1.02]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-400 text-lg",children:"ğŸ”´"}),e.jsxs("div",{children:[e.jsx("p",{className:f(y.bodySmall,"text-red-200"),children:"CRITICAL"}),e.jsx("p",{className:f("text-[10px]",y.mutedSmall),children:"Out of stock"})]})]}),e.jsx("p",{className:f("text-xl font-bold text-red-100"),children:k.criticalCount})]})}),k.priorityCriticalCount>0&&e.jsx("div",{onClick:()=>X("priority"),className:f(ee.priority,"p-2.5 cursor-pointer hover:scale-[1.02]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-400 text-lg",children:"â­"}),e.jsxs("div",{children:[e.jsx("p",{className:f(y.bodySmall,"text-purple-200"),children:"PRIORITY"}),e.jsx("p",{className:f("text-[10px]",y.mutedSmall),children:"Top 20 + Low stock"})]})]}),e.jsx("p",{className:f("text-xl font-bold text-purple-100"),children:k.priorityCriticalCount})]})}),e.jsx("div",{onClick:()=>k.urgentCount>0&&X("urgent"),className:f(ee.urgent,"p-2.5 cursor-pointer hover:scale-[1.02]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-400 text-lg",children:"ğŸŸ "}),e.jsxs("div",{children:[e.jsx("p",{className:f(y.bodySmall,"text-orange-200"),children:"URGENT"}),e.jsx("p",{className:f("text-[10px]",y.mutedSmall),children:"1-5 units left"})]})]}),e.jsx("p",{className:f("text-xl font-bold text-orange-100"),children:k.urgentCount})]})}),e.jsx("div",{onClick:()=>k.warningCount>0&&X("warning"),className:f(ee.warning,"p-2.5 cursor-pointer hover:scale-[1.02]"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400 text-lg",children:"ğŸŸ¡"}),e.jsxs("div",{children:[e.jsx("p",{className:f(y.bodySmall,"text-yellow-200"),children:"WARNING"}),e.jsx("p",{className:f("text-[10px]",y.mutedSmall),children:"6-10 units left"})]})]}),e.jsx("p",{className:f("text-xl font-bold text-yellow-100"),children:k.warningCount})]})})]})]}),e.jsxs("div",{className:f(Me("green",!0),"min-h-[280px] flex flex-col"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:y.kpiTitle,children:"Total Stock Quantity"}),e.jsx("h3",{className:y.kpiValue,children:ge.toLocaleString()}),e.jsx("p",{className:y.kpiSubtitle,children:"Unit tersedia"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>J("total-stock"),className:_e.iconSmall,title:"Lihat Analisis Inventory",children:e.jsx(Ae,{size:18})}),e.jsx("div",{className:"text-3xl",children:"ğŸ“Š"})]})]}),e.jsx("div",{className:"flex-1 flex flex-col justify-end",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-4",children:[e.jsxs("div",{className:f(ee.info,"p-3"),children:[e.jsx("p",{className:y.kpiSubtitle,children:"Total Parts"}),e.jsx("p",{className:f("text-lg font-bold text-blue-400"),children:le})]}),e.jsxs("div",{className:f(Re("purple",!1),"p-3"),children:[e.jsx("p",{className:y.kpiSubtitle,children:"Avg/Part"}),e.jsx("p",{className:f("text-lg font-bold text-purple-400"),children:le>0?Math.round(ge/le):0})]})]})})]}),e.jsxs("div",{className:f(Me("purple",!0),"min-h-[280px] flex flex-col"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:y.kpiTitle,children:"Top Parts by Stock"}),e.jsx("p",{className:y.kpiSubtitle,children:"8 parts dengan stock terbanyak"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>J("top-parts"),className:_e.iconSmall,title:"Lihat Analisis Detail",children:e.jsx(Ae,{size:18})}),e.jsx("div",{className:"text-3xl",children:"ğŸ†"})]})]}),be.length>0&&e.jsx("div",{className:"flex-1 mt-2",children:e.jsx(Oe,{width:"100%",height:150,children:e.jsxs(pt,{data:be,margin:{top:5,right:10,left:0,bottom:20},children:[e.jsx(mt,{dataKey:"name",tick:{fontSize:8,fill:"#94a3b8"},angle:-35,textAnchor:"end",height:45,interval:0}),e.jsx(Ue,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #8b5cf6",borderRadius:"8px",fontSize:"11px"},formatter:t=>[`${t} units`,"Stock"]}),e.jsx(ut,{dataKey:"value",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]})]}),R==="fsl-map"&&e.jsxs("div",{className:"fixed inset-0 z-[9999] bg-slate-900 flex flex-col",style:{zIndex:9999},children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700 flex-shrink-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Sebaran Lokasi FSL"}),e.jsx("button",{onClick:()=>A(null),className:"text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-slate-800",children:e.jsx(Be,{size:24})})]}),e.jsx("div",{className:"flex-1 p-4 overflow-hidden",style:{minHeight:0},children:e.jsx("div",{className:"h-full w-full map-container relative",children:e.jsxs(MapContainer,{center:[-2.5489,118.0149],zoom:5,style:{height:"100%",width:"100%"},zoomControl:!0,children:[e.jsx(TileLayer,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.jsx(GeoJSON,{data:geoJsonData,style:t=>{const s=(t.properties.Propinsi||t.properties.name||"").toUpperCase(),n=re.find(p=>{const h=p.fsl_city||p.fslcity||"",c=pe[h];return c&&s===c});let o="#e5e7eb",u=.1,a=1;if(n){const p=n.region||n["region "]||"Unknown";o=de(p),u=.4,a=2}return{fillColor:o,fillOpacity:u,color:i?"#ffffff":o||"#94a3b8",weight:a,opacity:i?.8:.9}},onEachFeature:(t,s)=>{const n=t.properties.Propinsi||t.properties.name||"",o=re.filter(u=>{const a=u.fsl_city||u.fslcity||"",l=pe[a];return l&&n.toUpperCase()===l});if(o.length>0){const u=o[0].region||o[0]["region "]||"Unknown",a=de(u),l=i?"#0f172a":"#ffffff",p=i?"#fff":"#0f172a",h=a,c=i?"#94a3b8":"#475569",S=i?"#334155":"#cbd5e1";let _=`
                        <div style="background: ${l}; padding: 12px; border-radius: 10px; border: 2px solid ${h}; min-width: 280px; max-width: 350px; box-shadow: ${i?"0 8px 24px rgba(0, 0, 0, 0.5)":"0 8px 24px rgba(0, 0, 0, 0.15)"};">
                          <div style="font-weight: 700; font-size: 14px; color: ${p}; margin-bottom: 8px; border-bottom: 1px solid ${h}; padding-bottom: 6px;">
                            ğŸ“ ${n}
                          </div>
                      `;o.forEach((r,C)=>{const ye=r.fsl_name||r.fslname||"FSL",Ne=r.fsl_id||r.fslid||"-",ve=r.fsl_city||r.fslcity||"-",we=r.region||r["region "]||"Unknown",Se=r.fsl_address||r.fsladdress||"No address",Ce=r.fsl_pic||r.fslpic||"-",ke=r.description||r.description||r.description||"-";C>0&&(_+=`<div style="border-top: 1px solid ${S}; margin: 8px 0;"></div>`),_+=`
                          <div style="margin-bottom: 4px;">
                            <div style="font-weight: 600; font-size: 12px; color: ${p}; margin-bottom: 4px;">ğŸ¢ ${ye}</div>
                            <div style="font-size: 10px; color: ${c}; line-height: 1.4;">
                              <div>ğŸ†” ID: <span style="color: ${i?"#cbd5e1":"#1e293b"}; font-weight: 500;">${Ne}</span></div>
                              <div>ğŸ™ï¸ Kota: <span style="color: ${i?"#cbd5e1":"#1e293b"}; font-weight: 500;">${ve}</span></div>
                              <div>ğŸ“Š Region: <span style="color: ${a}; font-weight: 600;">${we}</span></div>
                              <div>ğŸ§‘â€ğŸ’¼ PIC: <span style="color: ${i?"#10b981":"#059669"}; font-weight: 600;">${Ce}</span></div>
                              <div>ğŸšš Description: <span style="color: ${i?"#3b82f6":"#2563eb"}; font-weight: 600;">${ke}</span></div>
                              <div style="margin-top: 3px; color: ${i?"#cbd5e1":"#475569"};">ğŸ“ ${Se}</div>
                            </div>
                          </div>
                        `}),_+="</div>",s.bindTooltip(_,{sticky:!0,className:"custom-map-tooltip",direction:"top"}),s.on({mouseover:r=>{i?r.target.setStyle({fillOpacity:.85,weight:4,color:a,opacity:1}):(r.target.setStyle({fillOpacity:.75,weight:5,color:a,opacity:1,dashArray:"0"}),r.target.bringToFront())},mouseout:r=>{const C=i?"#ffffff":a;i?r.target.setStyle({fillOpacity:.4,weight:2,color:C,opacity:.8}):(r.target.setStyle({fillOpacity:.4,weight:2,color:C,opacity:.9}),r.target.bringToBack())}})}}})]})})})]}),R!=="fsl-map"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[var(--card-bg)] p-4 rounded-lg relative lg:col-span-2 min-h-[400px] flex flex-col",style:{zIndex:T||G||W||M?-1:1},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Sebaran Lokasi FSL"}),e.jsx("button",{onClick:()=>A("fsl-map"),className:"text-[var(--muted)] hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),!(T||G||W||M)&&e.jsx("div",{className:"flex-1 h-full",children:e.jsx("div",{className:"h-full map-container relative",style:{borderRadius:"16px",overflow:"hidden",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(59, 130, 246, 0.2)"},children:e.jsxs(MapContainer,{center:[-2.5489,118.0149],zoom:5,style:{height:"100%",width:"100%"},zoomControl:!0,children:[e.jsx(TileLayer,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.jsx(GeoJSON,{data:geoJsonData,style:t=>{const s=(t.properties.Propinsi||t.properties.name||"").toUpperCase(),n=re.find(p=>{const h=p.fsl_city||p.fslcity||"",c=pe[h];return c&&s===c});let o="#e5e7eb",u=.1,a=1;if(n){const p=n.region||n["region "]||"Unknown";o=de(p),u=.4,a=2}return{fillColor:o,fillOpacity:u,color:i?"#ffffff":o||"#94a3b8",weight:a,opacity:i?.8:.9}},onEachFeature:(t,s)=>{const n=t.properties.Propinsi||t.properties.name||"",o=re.filter(u=>{const a=u.fsl_city||u.fslcity||"",l=pe[a];return l&&n.toUpperCase()===l});if(o.length>0){const u=o[0].region||o[0]["region "]||"Unknown",a=de(u),l=i?"#0f172a":"#ffffff",p=i?"#fff":"#0f172a",h=a,c=i?"#94a3b8":"#475569",S=i?"#334155":"#cbd5e1";let _=`
                          <div style="background: ${l}; padding: 12px; border-radius: 10px; border: 2px solid ${h}; min-width: 280px; max-width: 350px; box-shadow: ${i?"0 8px 24px rgba(0, 0, 0, 0.5)":"0 8px 24px rgba(0, 0, 0, 0.15)"};">
                            <div style="font-weight: 700; font-size: 14px; color: ${p}; margin-bottom: 8px; border-bottom: 1px solid ${h}; padding-bottom: 6px;">
                              ğŸ“ ${n}
                            </div>
                        `;o.forEach((r,C)=>{const ye=r.fsl_name||r.fslname||"FSL",Ne=r.fsl_id||r.fslid||"-",ve=r.fsl_city||r.fslcity||"-",we=r.region||r["region "]||"Unknown",Se=r.fsl_address||r.fsladdress||"No address",Ce=r.fsl_pic||r.fslpic||"-",ke=r.description||r.description||"-";C>0&&(_+=`<div style="border-top: 1px solid ${S}; margin: 8px 0;"></div>`),_+=`
                            <div style="margin-bottom: 4px;">
                              <div style="font-weight: 600; font-size: 12px; color: ${p}; margin-bottom: 4px;">ğŸ¢ ${ye}</div>
                              <div style="font-size: 10px; color: ${c}; line-height: 1.4;">
                                <div>ğŸ†” ID: <span style="color: ${i?"#cbd5e1":"#1e293b"}; font-weight: 500;">${Ne}</span></div>
                                <div>ğŸ™ï¸ Kota: <span style="color: ${i?"#cbd5e1":"#1e293b"}; font-weight: 500;">${ve}</span></div>
                                <div>ğŸ“Š Region: <span style="color: ${a}; font-weight: 600;">${we}</span></div>
                                <div>ğŸ§‘â€ğŸ’¼ PIC: <span style="color: ${i?"#10b981":"#059669"}; font-weight: 600;">${Ce}</span></div>
                                <div>ğŸšš Description: <span style="color: ${i?"#3b82f6":"#2563eb"}; font-weight: 600;">${ke}</span></div>
                                <div style="margin-top: 3px; color: ${i?"#cbd5e1":"#475569"};">ğŸ“ ${Se}</div>
                              </div>
                            </div>
                          `}),_+="</div>",s.bindTooltip(_,{sticky:!0,className:"custom-map-tooltip",direction:"top"}),s.on({mouseover:r=>{i?r.target.setStyle({fillOpacity:.85,weight:4,color:a,opacity:1}):(r.target.setStyle({fillOpacity:.75,weight:5,color:a,opacity:1,dashArray:"0"}),r.target.bringToFront())},mouseout:r=>{const C=i?"#ffffff":a;i?r.target.setStyle({fillOpacity:.4,weight:2,color:C,opacity:.8}):(r.target.setStyle({fillOpacity:.4,weight:2,color:C,opacity:.9}),r.target.bringToBack())}})}}})]})})})]}),e.jsxs("div",{className:"bg-[var(--card-bg)] p-4 rounded-lg relative lg:col-span-1 min-h-[400px] max-h-[500px] flex flex-col",style:{zIndex:T||G||W||M?-1:1},children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Distribusi FSL per Region"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-slate-400",children:[$e," lokasi"]}),e.jsx("button",{onClick:()=>A("region-dist"),className:"text-[var(--muted)] hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]})]}),!R&&e.jsx(Oe,{width:"100%",height:350,children:e.jsxs(xt,{children:[e.jsx(ht,{data:Ee,cx:"50%",cy:"50%",labelLine:!1,label:({name:t,value:s})=>`${t}: ${s}`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:Ee.map((t,s)=>e.jsx(ft,{fill:Object.values(Vt)[s%3]},`cell-${s}`))}),e.jsx(Ue,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px"},labelStyle:{color:"#e2e8f0"}})]})})]})]}),R!=="fsl-map"&&e.jsxs("div",{className:"bg-[var(--card-bg)] rounded-xl border border-slate-700 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-700",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100 mb-1",children:"Stock Parts Management"}),e.jsx("p",{className:`text-xs ${i?"text-slate-300":"text-gray-700"}`,children:"Kelola data stok spare part dengan fitur CRUD"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${i?"text-slate-300":"text-gray-500"}`,size:16}),e.jsx("input",{type:"text",placeholder:"Search parts...",value:d,onChange:t=>{E(t.target.value),P(1)},className:`pl-10 pr-4 py-2 ${i?"bg-slate-800 border-slate-700 text-slate-100":"bg-white border-gray-300 text-gray-900"} border rounded-lg focus:outline-none focus:border-blue-500 w-64`})]}),e.jsxs("span",{className:`text-xs ${i?"text-slate-300":"text-gray-700"}`,children:[O.length," parts"]}),e.jsxs("button",{onClick:qe,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(gt,{size:16})," Add Part"]}),e.jsxs("button",{onClick:Xe,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(ce,{size:16})," Edit Part"]}),e.jsxs("label",{className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2 cursor-pointer",children:[e.jsx(bt,{size:16})," ",ue?"Uploading...":"Upload CSV",e.jsx("input",{type:"file",accept:".csv",onChange:lt,className:"hidden",disabled:ue})]}),e.jsxs("button",{onClick:nt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(jt,{size:16})," Export CSV"]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-3 border-t border-slate-700",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-300",children:"Filter by City/FSL:"}),e.jsxs("select",{value:m,onChange:t=>We(t.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-100 focus:outline-none focus:border-blue-500 min-w-[200px]",children:[e.jsx("option",{value:"",children:"Pilih FSL/City"}),[...new Set(v.map(t=>t.fsl_city||t.fslcity).filter(Boolean))].sort().map(t=>e.jsx("option",{value:t,children:t},t))]}),m&&fe.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-green-400 font-semibold",children:[fe.reduce((t,s)=>t+s.value,0)," total stock di ",m]}),e.jsx("button",{onClick:()=>Pe(!0),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-medium transition-colors flex items-center gap-1",children:"Detail"})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 border-b border-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Part Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Part Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Top 20"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"FSL Locations"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"FSL Stock"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-slate-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:Qe.map((t,s)=>{const n=t.part_number||t["part number"]||"-",o=t.part_name||t["part name"]||"-",u=t.type_of_part||t["type of part"]||"-",a=t["20_top_usage"]||t["20 top usage"]||"No",p=Object.keys(t).filter(c=>c.toLowerCase().includes("idfsl")||c.toLowerCase().includes("idccw")).map(c=>{const S=parseInt(t[c]||0);if(S>0){let _=c;if(c.includes("idfsl")&&c.includes("_fsl_")){const r=c.split("_fsl_")[1];r&&(_="FSL "+r.split("_").map(C=>C.charAt(0).toUpperCase()+C.slice(1)).join(" "))}else if(c.includes("idccw")){const r=c.replace(/^idccw\d+_/,"");r&&(_=r.split("_").map(C=>C.charAt(0).toUpperCase()+C.slice(1)).join(" "),c.toLowerCase().includes("idccw00")&&(_+=" (Jakarta)"))}return{name:_,stock:S}}return null}).filter(Boolean).sort((c,S)=>S.stock-c.stock),h=p.reduce((c,S)=>c+S.stock,0);return e.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-blue-400",children:n})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"text-sm text-slate-300 max-w-xs truncate",title:o,children:o})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-500/20 text-purple-400",children:u})}),e.jsx("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:a.toLowerCase()==="yes"?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-500/20 text-green-400",children:"âœ“ Yes"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-slate-700 text-slate-400",children:"No"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:p.length>0?e.jsxs(e.Fragment,{children:[p.slice(0,3).map((c,S)=>e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-500/20 text-blue-400 whitespace-nowrap",children:[c.name,": ",c.stock]},S)),p.length>3&&e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-slate-700 text-slate-400",children:["+",p.length-3]})]}):e.jsx("span",{className:"text-xs text-slate-500",children:"No stock"})})}),e.jsx("td",{className:"px-4 py-3 text-center whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-bold text-cyan-400",children:h})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>ie(t),className:"p-1.5 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded transition-colors",title:"Edit",children:e.jsx(ce,{size:16})}),e.jsx("button",{onClick:()=>rt(t),className:"p-1.5 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Delete",children:e.jsx(yt,{size:16})})]})})]},s)})})]})}),oe>1&&e.jsxs("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-400",children:["Showing ",(b-1)*K+1," to ",Math.min(b*K,O.length)," of ",O.length," parts"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>je(b-1),disabled:b===1,className:"p-2 rounded-lg border border-slate-700 text-slate-400 hover:text-white hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(Nt,{size:16})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:oe},(t,s)=>s+1).map(t=>e.jsx("button",{onClick:()=>je(t),className:`px-3 py-1 rounded-lg text-sm transition-colors ${b===t?"bg-blue-500 text-white":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:t},t))}),e.jsx("button",{onClick:()=>je(b+1),disabled:b===oe,className:"p-2 rounded-lg border border-slate-700 text-slate-400 hover:text-white hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(vt,{size:16})})]})]})]}),e.jsxs(te.Suspense,{fallback:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:[G&&e.jsx(Ot,{isOpen:G,onClose:()=>Pe(!1),sortValue:m,filteredStockParts:ne,partsDistributionByFSL:fe,onEdit:ie}),T&&e.jsx(Ut,{isOpen:T,onClose:()=>{V(!1),q(null)},modalMode:H,formData:Le,setFormData:ae,stockParts:N,validParts:F,editingFSL:Ge,onPartNumberSelect:st,onSave:at}),M&&e.jsx(Bt,{activeKPI:M,onClose:()=>J(null),stockAlerts:k,totalStockQuantity:ge,totalParts:le,totalFSL:$e,validParts:F,topPartsByStock:be,onShowAlertDetail:X}),W&&e.jsx(zt,{isOpen:W,onClose:()=>Te(!1),alertData:Ye(),onEdit:ie})]}),Ke&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl border border-slate-700 shadow-2xl w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-slate-800 to-slate-700 border-b border-slate-600 px-6 py-5 flex justify-between items-center shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:e.jsx(ce,{className:"text-blue-400",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-100",children:"Pilih Part untuk Edit"}),e.jsx("p",{className:"text-xs text-slate-400 mt-0.5",children:"Pilih part yang ingin Anda edit"})]})]}),e.jsx("button",{onClick:()=>xe(!1),className:"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50 p-2 rounded-lg transition-all",title:"Tutup",children:e.jsx(Be,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Cari part number atau part name...",value:se,onChange:t=>he(t.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-700/60 border border-slate-600 rounded-xl text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500"})]})}),e.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:Ie.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(Fe,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Tidak ada part yang ditemukan"})]}):Ie.map(t=>{const s=t.part_number||t["part number"]||"",n=t.part_name||t["part name"]||"",o=t.type_of_part||t["type of part"]||"",u=t.grand_total||t["grand total"]||0;return e.jsx("button",{onClick:()=>Ze(t),className:"w-full text-left p-4 bg-slate-700/40 hover:bg-slate-700/80 border border-slate-600 hover:border-blue-500/50 rounded-xl transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(wt,{className:"text-blue-400 group-hover:text-blue-300",size:16}),e.jsx("span",{className:"font-semibold text-slate-100 group-hover:text-blue-300",children:s})]}),e.jsx("p",{className:"text-sm text-slate-300 mb-1 truncate",children:n}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[o&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(St,{size:12}),o]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{size:12}),"Total: ",u]})]})]}),e.jsx(ce,{className:"text-slate-400 group-hover:text-blue-400 transition-colors flex-shrink-0",size:20})]})},s)})})]})]})}),e.jsx(Et,{isOpen:L.alertState.isOpen,onClose:L.closeAlert,type:L.alertState.type,title:L.alertState.title,message:L.alertState.message,duration:L.alertState.duration}),e.jsx(Pt,{isOpen:U.confirmState.isOpen,onClose:U.closeConfirm,onConfirm:U.handleConfirm,title:U.confirmState.title,message:U.confirmState.message,confirmText:U.confirmState.confirmText,cancelText:U.confirmState.cancelText,type:U.confirmState.type,confirmButtonColor:U.confirmState.confirmButtonColor}),w&&e.jsx($t,{size:"md",message:"Memproses..."})]})}export{Zt as default};
