import{r as c}from"./vendor-react-C0jbZujj.js";function l(t,n={}){const{parser:a=null,autoFetch:u=!0,eventName:i=null}=n,[m,g]=c.useState([]),[w,f]=c.useState(u),[D,d]=c.useState(null),o=c.useCallback(async()=>{try{f(!0),d(null);const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json(),s=a?a(r):r;g(s)}catch(e){console.error(`Error fetching data from ${t}:`,e),d(e.message)}finally{f(!1)}},[t,a]);return c.useEffect(()=>{if(u&&o(),i){let e=null,r=!1,s=null;const h=()=>{e&&clearTimeout(e),s&&cancelAnimationFrame(s),e=setTimeout(()=>{r||(r=!0,window.requestIdleCallback?window.requestIdleCallback(()=>{o().then(()=>{r=!1}).catch(()=>{r=!1})},{timeout:1e3}):s=requestAnimationFrame(()=>{o().then(()=>{r=!1}).catch(()=>{r=!1})}))},250)};return window.addEventListener(i,h,{passive:!0}),()=>{e&&clearTimeout(e),s&&cancelAnimationFrame(s),window.removeEventListener(i,h)}}},[u,i,o]),{data:m,loading:w,error:D,refetch:o}}function E(){const{data:t,loading:n,error:a}=l("/api/engineers",{eventName:"engineerDataChanged"});return{rows:t,loading:n,error:a}}function F(){const{data:t,loading:n,error:a}=l("/api/machines",{eventName:"machineDataChanged"});return{rows:t,loading:n,error:a}}function k(){const{data:t,loading:n,error:a}=l("/api/stock-parts",{eventName:"stockPartDataChanged"});return{rows:t,loading:n,error:a}}function C(){const{data:t,loading:n,error:a}=l("/api/fsl-locations");return{rows:t,loading:n,error:a}}export{F as a,k as b,C as c,E as u};
