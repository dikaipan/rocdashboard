import{r as a}from"./vendor-react-C0jbZujj.js";function v(m,n,g){const _=a.useMemo(()=>{const t={critical:[],urgent:[],warning:[],priorityCritical:[],overstock:[]};return m.forEach(e=>{if((e.part_number||e["part number"]||"").toLowerCase()==="region")return;const c=(e["20_top_usage"]||e["20 top usage"]||"").toLowerCase()==="yes";Object.keys(e).filter(r=>r.toLowerCase().includes("idfsl")||r.toLowerCase().includes("idccw")).forEach(r=>{const i=parseInt(e[r]||0);let p=r;if(r.includes("idfsl")&&r.includes("_fsl_")){const u=r.split("_fsl_")[1];u&&(p="FSL "+u.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "))}else if(r.includes("idccw")){const u=r.replace(/^idccw\d+_/,"");u&&(p=u.split("_").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),r.toLowerCase().includes("idccw00")&&(p+=" (Jakarta)"))}const s={part:e,fslName:p,fslColumn:r,stock:i};i===0?t.critical.push(s):i>=1&&i<=5?(t.urgent.push(s),c&&t.priorityCritical.push(s)):i>=6&&i<=10?(t.warning.push(s),c&&t.priorityCritical.push(s)):i>100&&t.overstock.push(s)})}),{critical:t.critical,urgent:t.urgent,warning:t.warning,priorityCritical:t.priorityCritical,overstock:t.overstock,criticalCount:t.critical.length,urgentCount:t.urgent.length,warningCount:t.warning.length,priorityCriticalCount:t.priorityCritical.length,overstockCount:t.overstock.length,totalLowStock:t.critical.length+t.urgent.length+t.warning.length}},[m]),w=a.useMemo(()=>n.reduce((t,e)=>t+parseInt(e.grand_total||e["grand total"]||0),0),[n]),y=a.useMemo(()=>{const t={};return g.forEach(e=>{const o=e.region||e["region "]||"Unknown";t[o]=(t[o]||0)+1}),Object.entries(t).map(([e,o])=>({name:e,value:o}))},[g]),b=a.useMemo(()=>{const t={};return n.forEach(e=>{if((e.part_number||e["part number"]||"").toLowerCase()==="region")return;const c=e.type_of_part||e["type of part"]||"Other",h=parseInt(e.grand_total||e["grand total"]||0);t[c]=(t[c]||0)+h}),Object.entries(t).map(([e,o])=>({name:e,value:o})).sort((e,o)=>o.value-e.value).slice(0,5)},[n]),C=a.useMemo(()=>n.length?n.filter(t=>{const e=t.part_number||t["part number"]||"";return e&&e.toLowerCase()!=="region"}).map(t=>{const e=parseInt(t.grand_total||t["grand total"]||0);return{name:(t.part_name||t["part name"]||"Unknown").substring(0,20),partNumber:t.part_number||t["part number"],value:e}}).sort((t,e)=>e.value-t.value).slice(0,8):[],[n]),f=a.useMemo(()=>n.filter(t=>{var e;return((e=t["20_top_usage"])==null?void 0:e.toLowerCase())==="yes"}).length,[n]);return{stockAlerts:_,totalStockQuantity:w,regionDistribution:y,stockByType:b,topPartsByStock:C,top20UsageParts:f,totalFSL:g.length,totalParts:n.length}}export{v as u};
